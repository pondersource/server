/*! For license information please see polls-node_modules_vue-material-design-icons_Minus_vue-node_modules_vue-material-design-icons_Plus_-ac849f.js.LICENSE.txt */
"use strict";(self.webpackChunkpolls=self.webpackChunkpolls||[]).push([["node_modules_vue-material-design-icons_Minus_vue-node_modules_vue-material-design-icons_Plus_-ac849f"],{53154:(t,e,i)=>{i.d(e,{c:()=>s});var a=i(67514);const s={validateEmailAddress(t){return a.cF.request({method:"GET",url:"check/emailaddress/".concat(t),cancelToken:n[this.validateEmailAddress.name].handleRequestCancellation().token})},validateName(t,e){return a.cF.request({method:"POST",url:"check/username",cancelToken:n[this.validateName.name].handleRequestCancellation().token,data:{userName:e,token:t}})}},n=(0,a.c1)(s)},29812:(t,e,i)=>{i.d(e,{Z:()=>a});const a={name:"SimpleLink",functional:!0,props:{href:{type:String,default:""},name:{type:String,default:""},target:{type:String,default:null}},render:(t,e)=>t("a",{attrs:{href:e.props.href,target:e.props.target}},e.props.name)}},3958:(t,e,i)=>{i.d(e,{Z:()=>l});var a=i(87537),s=i.n(a),n=i(23645),r=i.n(n)()(s());r.push([t.id,'.section__optin a{text-decoration:underline}.modal__registration{display:flex;flex-wrap:wrap;overflow:hidden}.modal__registration>div{display:flex;flex-direction:column;flex:1 auto;min-width:140px;padding:24px;border-top:1px solid;border-right:1px solid;margin-top:-2px;margin-right:-2px}.modal__registration>div>button{margin:8px 0}.modal__registration .registration__login{flex:1 180px}.modal__registration .registration__registration{flex:1 480px}[class*=section__]{margin:4px 0}.modal__content .enter__name,.modal__content .enter__email{margin-bottom:12px}.description{hyphens:auto;border-top:1px solid var(--color-border)}.legal_links a{color:var(--color-text-maxcontrast);font-weight:bold;white-space:nowrap;padding:10px;margin:-10px}.legal_links a:hover,.legal_links a:active{color:var(--color-main-text)}.legal_links a:hover::after,.legal_links a:active::after{color:var(--color-text-maxcontrast)}.legal_links a:after{content:"|";padding:0 4px}.legal_links a:last-child:after{content:""}',"",{version:3,sources:["webpack://./src/js/components/Poll/PublicRegisterModal.vue"],names:[],mappings:"AAEC,kBACC,yBAAA,CAIF,qBACC,YAAA,CACA,cAAA,CACA,eAAA,CACA,yBACC,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CACA,YAAA,CACA,oBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CACA,gCACC,YAAA,CAIF,0CACC,YAAA,CAED,iDACC,YAAA,CAKF,mBACC,YAAA,CAIA,2DACC,kBAAA,CAIF,aACC,YAAA,CACA,wCAAA,CAIA,eACC,mCAAA,CACA,gBAAA,CACA,kBAAA,CACA,YAAA,CACA,YAAA,CAEA,2CACC,4BAAA,CACA,yDACC,mCAAA,CAIF,qBACI,WAAA,CACH,aAAA,CAGD,gCACI,UAAA",sourcesContent:['\n.section__optin {\n\ta {\n\t\ttext-decoration: underline;\n\t}\n}\n\n.modal__registration {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\toverflow: hidden;\n\t&>div {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1 auto;\n\t\tmin-width: 140px;\n\t\tpadding: 24px;\n\t\tborder-top: 1px solid;\n\t\tborder-right: 1px solid;\n\t\tmargin-top: -2px;\n\t\tmargin-right: -2px;\n\t\t> button {\n\t\t\tmargin: 8px 0;\n\t\t}\n\t}\n\n\t.registration__login {\n\t\tflex: 1 180px;\n\t}\n\t.registration__registration {\n\t\tflex: 1 480px;\n\n\t}\n}\n\n[class*=\'section__\'] {\n\tmargin: 4px 0;\n}\n\n.modal__content {\n\t.enter__name, .enter__email {\n\t\tmargin-bottom: 12px;\n\t}\n}\n\n.description {\n\thyphens: auto;\n\tborder-top: 1px solid var(--color-border);\n}\n\n.legal_links {\n\ta {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tfont-weight: bold;\n\t\twhite-space: nowrap;\n\t\tpadding: 10px;\n\t\tmargin: -10px;\n\n\t\t&:hover, &:active {\n\t\t\tcolor: var(--color-main-text);\n\t\t\t&::after {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\t\t}\n\n\t\t&:after {\n\t\t    content:"|";\n\t\t\tpadding: 0 4px;\n\t\t}\n\n\t\t&:last-child:after {\n\t\t    content:"";\n\t\t}\n\t}\n}\n'],sourceRoot:""}]);const l=r},25660:(t,e,i)=>{i.d(e,{Z:()=>n});var a=i(42672),s=i(94878);const n=(0,i(51900).Z)(s.Z,a.s,a.x,!1,null,null,null).exports},84373:(t,e,i)=>{i.d(e,{Z:()=>a});const a={name:"MinusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}},99270:(t,e,i)=>{i.d(e,{Z:()=>n});var a=i(65120),s=i(88041);const n=(0,i(51900).Z)(s.Z,a.s,a.x,!1,null,null,null).exports},26959:(t,e,i)=>{i.d(e,{Z:()=>a});const a={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}},93878:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Z});var s=function(){var t=this,e=t._self._c;return e("NcModal",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],attrs:{size:t.modalSize,"can-close":!1}},[e("div",{staticClass:"modal__content"},[e("div",{staticClass:"modal__registration"},[e("div",{staticClass:"registration__registration"},[e("h2",[t._v(t._s(t.t("polls","Guest users")))]),e("InputDiv",{staticClass:"section__username",attrs:{"signaling-class":t.checkStatus.userName,placeholder:t.t("polls","Enter your name or a nickname"),"helper-text":t.userNameHint,focus:""},on:{submit:t.submitRegistration},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),"disabled"!==t.share.publicPollEmail?e("InputDiv",{staticClass:"section__email",attrs:{"signaling-class":t.checkStatus.email,placeholder:t.t("polls","mandatory"===t.share.publicPollEmail?"Email address (mandatory)":"Email address (optional)"),"helper-text":t.emailAddressHint,type:"email",inputmode:"email"},on:{submit:t.submitRegistration},model:{value:t.emailAddress,callback:function(e){t.emailAddress=e},expression:"emailAddress"}}):t._e(),"public"===t.share.type?e("NcCheckboxRadioSwitch",{attrs:{checked:t.saveCookie},on:{"update:checked":function(e){t.saveCookie=e}}},[t._v(" "+t._s(t.t("polls","Remember me for 30 days"))+" ")]):t._e(),t.privacyUrl?e("div",{staticClass:"section__optin"},[e("NcRichText",{attrs:{text:t.privacyRich.subject,arguments:t.privacyRich.parameters}})],1):t._e(),e("div",{staticClass:"modal__buttons"},[e("div",{staticClass:"left"},[e("div",{staticClass:"legal_links"},[t.imprintUrl?e("SimpleLink",{attrs:{href:t.imprintUrl,target:"_blank",name:t.t("polls","Legal Notice")}}):t._e()],1)]),e("div",{staticClass:"right"},[e("NcButton",{on:{click:t.closeModal},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Cancel"))+" ")]},proxy:!0}])}),e("NcButton",{attrs:{type:"primary",disabled:t.disableSubmit},on:{click:function(e){return t.submitRegistration()}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","OK"))+" ")]},proxy:!0}])})],1)])],1),t.share.showLogin?e("div",{staticClass:"registration__login"},[e("h2",[t._v(" "+t._s(t.t("polls","Registered users"))+" ")]),e("NcButton",{attrs:{wide:""},on:{click:function(e){return t.login()}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Login"))+" ")]},proxy:!0}],null,!1,2388514509)}),e("div",[t._v(" "+t._s(t.t("polls","As a regular user of this site, you can participate with your internal identity after logging in."))+" ")]),e("div",[t._v(" "+t._s(t.t("polls","Otherwise participate as a guest user."))+" ")])],1):t._e()])])])};s._withStripped=!0;var n=a(96486),r=a(64024),l=a(79753),o=a(15961),c=a(20629),d=a(34461),u=a(29812),m=a(53154),p=a(79801),h=a(61839);const A={name:"PublicRegisterModal",components:{NcCheckboxRadioSwitch:o.rw,InputDiv:d.Z,NcModal:o.Jc,NcRichText:o.rE,SimpleLink:u.Z,NcButton:o.P2},data:()=>({checkStatus:{email:"empty",userName:"empty"},userName:"",emailAddress:"",redirecting:!1,modal:!0,modalSize:"large",saveCookie:!0}),computed:{...(0,c.rn)({poll:t=>t.poll,share:t=>t.share,privacyUrl:t=>t.appSettings.usePrivacyUrl,imprintUrl:t=>t.appSettings.useImprintUrl}),registrationIsValid(){return"valid"===this.checkStatus.userName&&("valid"===this.checkStatus.email||0===this.emailAddress.length&&"mandatory"!==this.share.publicPollEmail)},disableSubmit(){return!this.registrationIsValid||"checking"===this.checkStatus.userName},privacyRich(){return{subject:t("polls",'By clicking the "OK" button you accept our {privacyPolicy}.'),parameters:{privacyPolicy:{component:u.Z,props:{href:this.privacyUrl,name:t("polls","privacy policy"),target:"_blank"}}}}},loginLink(){const t=this.$router.resolve({name:"publicVote",params:{token:this.$route.params.token}}).href;return"".concat((0,l.generateUrl)("/login"),"?redirect_url=").concat(t)},userNameHint(){return"checking"===this.checkStatus.userName?t("polls","Checking name …"):"empty"===this.checkStatus.userName?t("polls","A name is required."):"invalid"===this.checkStatus.userName?t("polls","The name {username} is invalid or reserved.",{username:this.userName}):""},emailGeneratedStatus(){return"empty"===this.checkStatus.email?this.share.publicPollEmail:this.checkStatus.email},emailAddressHint(){return"checking"===this.emailGeneratedStatus?t("polls","Checking email address …"):"mandatory"===this.emailGeneratedStatus?t("polls","An email address is required."):"invalid"===this.emailGeneratedStatus?t("polls","Invalid email address."):"public"===this.share.type?"valid"===this.emailGeneratedStatus?t("polls",'You will receive your personal link after clicking "OK".'):t("polls","Enter your email address to get your personal access link."):""}},watch:{userName(){this.validatePublicUsername()},emailAddress(){this.validateEmailAddress()}},mounted(){"publicVote"===this.$route.name&&this.$route.query.name?this.userName=this.$route.query.name:this.userName=this.share.displayName,"publicVote"===this.$route.name&&this.$route.query.email?this.emailAddress=this.$route.query.email:this.emailAddress=this.share.emailAddress},methods:{closeModal(){this.modal=!1},login(){window.location.assign("".concat(window.location.protocol,"//").concat(window.location.host).concat(this.loginLink))},validatePublicUsername:(0,n.debounce)((async function(){if(this.userName.length<1)this.checkStatus.userName="empty";else{this.checkStatus.userName="checking";try{await m.c.validateName(this.$route.params.token,this.userName),this.checkStatus.userName="valid"}catch(t){if("ERR_CANCELED"===(null==t?void 0:t.code))return;if("ERR_BAD_REQUEST"===(null==t?void 0:t.code))return void(this.checkStatus.userName="invalid");throw t}}}),500),validateEmailAddress:(0,n.debounce)((async function(){if(this.emailAddress.length<1)this.checkStatus.email="empty";else{this.checkStatus.email="checking";try{await m.c.validateEmailAddress(this.emailAddress),this.checkStatus.email="valid"}catch(t){if("ERR_CANCELED"===(null==t?void 0:t.code))return;if("ERR_BAD_REQUEST"===(null==t?void 0:t.code))return void(this.checkStatus.email="invalid");throw t}}}),500),updateCookie(t){(0,h.d8)(this.$route.params.token,t,432e5)},routeToPersonalShare(t){this.$route.params.token===t?(this.$store.dispatch({type:"poll/get"}),this.closeModal()):(this.redirecting=!0,this.$router.replace({name:"publicVote",params:{token:t}}),this.closeModal())},async submitRegistration(){if(this.registrationIsValid)try{const e=await p.p.register(this.$route.params.token,this.userName,this.emailAddress);this.saveCookie&&"public"===this.$route.params.type&&this.updateCookie(e.data.share.token),this.routeToPersonalShare(e.data.share.token),this.share.emailAddress&&!this.share.invitationSent&&(0,r.x2)(t("polls","Email could not be sent to {emailAddress}",{emailAddress:this.share.emailAddress}))}catch(e){if("ERR_CANCELED"===(null==e?void 0:e.code))return;throw(0,r.x2)(t("polls","Error registering to poll",{error:e.response})),e}}}};var g=a(93379),_=a.n(g),C=a(7795),v=a.n(C),k=a(90569),f=a.n(k),x=a(3565),y=a.n(x),b=a(19216),S=a.n(b),w=a(44589),N=a.n(w),E=a(3958),R={};R.styleTagTransform=N(),R.setAttributes=y(),R.insert=f().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=S();_()(E.Z,R);E.Z&&E.Z.locals&&E.Z.locals;const Z=(0,a(51900).Z)(A,s,[],!1,null,null,null).exports},94878:(t,e,i)=>{i.d(e,{Z:()=>a});const a=i(84373).Z},88041:(t,e,i)=>{i.d(e,{Z:()=>a});const a=i(26959).Z},42672:(t,e,i)=>{i.d(e,{s:()=>a.s,x:()=>a.x});var a=i(12034)},65120:(t,e,i)=>{i.d(e,{s:()=>a.s,x:()=>a.x});var a=i(25195)},12034:(t,e,i)=>{i.d(e,{s:()=>a,x:()=>s});var a=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon minus-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19,13H5V11H19V13Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},s=[];a._withStripped=!0},25195:(t,e,i)=>{i.d(e,{s:()=>a,x:()=>s});var a=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},s=[];a._withStripped=!0}}]);
//# sourceMappingURL=polls-node_modules_vue-material-design-icons_Minus_vue-node_modules_vue-material-design-icons_Plus_-ac849f.js.map?v=80afa959b51018b8400e