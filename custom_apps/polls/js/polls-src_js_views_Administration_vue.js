"use strict";(self.webpackChunkpolls=self.webpackChunkpolls||[]).push([["src_js_views_Administration_vue"],{82869:(t,e,l)=>{l.d(e,{Z:()=>o});const o={name:"PollsAppIcon",props:{title:{type:String,default:"Polls"},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}},24274:(t,e,l)=>{l.d(e,{s:()=>o,x:()=>s});var o=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon polls-app-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 32 32"}},[e("g",{attrs:{fill:t.fillColor}},[e("rect",{attrs:{y:"2",x:"3",height:"26",width:"7"}}),e("rect",{attrs:{y:"12",x:"12",height:"16",width:"7"}}),e("rect",{attrs:{y:"8",x:"21",height:"20",width:"7"}}),t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},s=[];o._withStripped=!0},98701:(t,e,l)=>{l.d(e,{Z:()=>r});var o=l(87537),s=l.n(o),n=l(23645),i=l.n(n)()(s());i.push([t.id,".page--scrolled .header_bar_bottom{display:none}.header_bar .header_bar_top{display:flex;flex-wrap:wrap-reverse;justify-content:flex-end;gap:8px;min-height:3em}.header_bar .header_bar_top .bar_top_left{display:flex;flex-direction:column;flex:1 180px;justify-content:center}.header_bar .header_bar_top .header_title{font-weight:bold;font-size:1em;line-height:1.5em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.header_bar .header_bar_top .header_title.clamped{-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.header_bar .header_bar_top .sub{display:flex;flex-wrap:wrap}.header_bar .header_bar_top .header_bar_bottom{display:flex;margin-bottom:16px}.header_bar [class*=bar_]{flex:0}","",{version:3,sources:["webpack://./src/js/components/Base/HeaderBar.vue"],names:[],mappings:"AACA,mCACC,YAAA,CAIA,4BACC,YAAA,CACA,sBAAA,CACA,wBAAA,CACA,OAAA,CACA,cAAA,CAEA,0CACC,YAAA,CACA,qBAAA,CACA,YAAA,CACA,sBAAA,CAGD,0CACC,gBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,sBAAA,CACA,mBAAA,CACA,kDACC,oBAAA,CACA,YAAA,CACA,2BAAA,CAGF,iCACC,YAAA,CACA,cAAA,CAED,+CACC,YAAA,CACA,kBAAA,CAIF,0BACC,MAAA",sourcesContent:['\n.page--scrolled .header_bar_bottom {\n\tdisplay: none;\n}\n\n.header_bar {\n\t.header_bar_top {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap-reverse;\n\t\tjustify-content: flex-end;\n\t\tgap: 8px;\n\t\tmin-height: 3em;\n\n\t\t.bar_top_left {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tflex: 1 180px;\n\t\t\tjustify-content: center;\n\t\t}\n\n\t\t.header_title {\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 1em;\n\t\t\tline-height: 1.5em;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tdisplay: -webkit-box;\n\t\t\t&.clamped {\n\t\t\t\t-webkit-line-clamp: 2;\n\t\t\t\tline-clamp: 2;\n\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t}\n\t\t}\n\t\t.sub {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t}\n\t\t.header_bar_bottom {\n\t\t\tdisplay: flex;\n\t\t\tmargin-bottom: 16px;\n\t\t}\n\t}\n\n\t[class*="bar_"] {\n\t\tflex: 0;\n\t}\n}\n'],sourceRoot:""}]);const r=i},94808:(t,e,l)=>{l.d(e,{Z:()=>r});var o=l(87537),s=l.n(o),n=l(23645),i=l.n(n)()(s());i.push([t.id,".poll-list__list{width:100%;display:flex;flex-direction:column;overflow:scroll;padding-bottom:14px}","",{version:3,sources:["webpack://./src/js/views/Administration.vue"],names:[],mappings:"AACA,iBACC,UAAA,CACA,YAAA,CACA,qBAAA,CACA,eAAA,CACA,mBAAA",sourcesContent:["\n.poll-list__list {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: scroll;\n\tpadding-bottom: 14px;\n}\n"],sourceRoot:""}]);const r=i},63651:(t,e,l)=>{l.d(e,{Z:()=>n});var o=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon archive-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M3,3H21V7H3V3M4,8H20V21H4V8M9.5,11A0.5,0.5 0 0,0 9,11.5V13H15V11.5A0.5,0.5 0 0,0 14.5,11H9.5Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])};o._withStripped=!0;const s={name:"ArchiveIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const n=(0,l(51900).Z)(s,o,[],!1,null,null,null).exports},50171:(t,e,l)=>{l.d(e,{Z:()=>n});var o=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon delete-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])};o._withStripped=!0;const s={name:"DeleteIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const n=(0,l(51900).Z)(s,o,[],!1,null,null,null).exports},99270:(t,e,l)=>{l.d(e,{Z:()=>n});var o=l(65120),s=l(88041);const n=(0,l(51900).Z)(s.Z,o.s,o.x,!1,null,null,null).exports},26959:(t,e,l)=>{l.d(e,{Z:()=>o});const o={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}},93317:(t,e,l)=>{l.d(e,{Z:()=>n});var o=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon recycle-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M21.82,15.42L19.32,19.75C18.83,20.61 17.92,21.06 17,21H15V23L12.5,18.5L15,14V16H17.82L15.6,12.15L19.93,9.65L21.73,12.77C22.25,13.54 22.32,14.57 21.82,15.42M9.21,3.06H14.21C15.19,3.06 16.04,3.63 16.45,4.45L17.45,6.19L19.18,5.19L16.54,9.6L11.39,9.69L13.12,8.69L11.71,6.24L9.5,10.09L5.16,7.59L6.96,4.47C7.37,3.64 8.22,3.06 9.21,3.06M5.05,19.76L2.55,15.43C2.06,14.58 2.13,13.56 2.64,12.79L3.64,11.06L1.91,10.06L7.05,10.14L9.7,14.56L7.97,13.56L6.56,16H11V21H7.4C6.47,21.07 5.55,20.61 5.05,19.76Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])};o._withStripped=!0;const s={name:"RecycleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const n=(0,l(51900).Z)(s,o,[],!1,null,null,null).exports},73108:(t,e,l)=>{l.d(e,{Z:()=>n});var o=l(53729),s=l(77745);const n=(0,l(51900).Z)(s.Z,o.s,o.x,!1,null,null,null).exports},1410:(t,e,l)=>{l.d(e,{Z:()=>v});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header_bar"},[e("div",{staticClass:"header_bar_top"},[e("div",{staticClass:"bar_top_left"},[e("div",{class:["header_title",{clamped:t.clamped}],on:{click:function(e){return t.toggleClamp()}}},[t._t("title")],2),e("div",{staticClass:"bar_top_left_sub"},[t._t("sub")],2)]),e("div",{staticClass:"bar_top_right"},[t._t("right")],2)]),e("div",{staticClass:"header_bar_bottom"},[t._t("default")],2)])};o._withStripped=!0;const s={name:"HeaderBar",data:()=>({clamped:!0}),methods:{toggleClamp(){this.clamped=!this.clamped}}};var n=l(93379),i=l.n(n),r=l(7795),a=l.n(r),c=l(90569),d=l.n(c),p=l(3565),u=l.n(p),A=l(19216),_=l.n(A),h=l(44589),f=l.n(h),m=l(98701),C={};C.styleTagTransform=f(),C.setAttributes=u(),C.insert=d().bind(null,"head"),C.domAPI=a(),C.insertStyleElement=_();i()(m.Z,C);m.Z&&m.Z.locals&&m.Z.locals;const v=(0,l(51900).Z)(s,o,[],!1,null,null,null).exports},29062:(e,l,o)=>{o.r(l),o.d(l,{default:()=>S});var s=function(){var t=this,e=t._self._c;return e("NcAppContent",{staticClass:"poll-list"},[e("HeaderBar",{staticClass:"area__header",scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.t("polls","Administrative poll management"))+" ")]},proxy:!0}])},[t._v(" "+t._s(t.t("polls","Manage polls of other users. You can take over the ownership or delete polls."))+" ")]),e("div",{staticClass:"area__main"},[t.noPolls?e("NcEmptyContent",{attrs:{title:t.t("polls","No polls found for this category")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PollsAppIcon")]},proxy:!0},{key:"action",fn:function(){return[t._v(" "+t._s(t.t("polls","Add one or change category!"))+" ")]},proxy:!0}],null,!1,2290787160)}):e("transition-group",{staticClass:"poll-list__list",attrs:{name:"list",tag:"div"}},[e("PollItem",{key:"0",attrs:{header:!0,sort:t.sort,reverse:t.reverse},on:{"sort-list":function(e){return t.setSort(e)}}}),t._l(t.sortedList,(function(l){return e("PollItem",{key:l.id,attrs:{poll:l,"no-link":""},scopedSlots:t._u([{key:"actions",fn:function(){return[e("NcActions",{attrs:{"force-menu":!0}},[e("NcActionButton",{attrs:{"close-after-click":""},on:{click:function(e){return t.confirmTakeOver(l.id,l.owner)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Take over"))+" ")]),e("NcActionButton",{attrs:{"close-after-click":""},on:{click:function(e){return t.toggleArchive(l.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[l.deleted?e("RestorePollIcon"):e("ArchivePollIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(l.deleted?t.t("polls","Restore poll"):t.t("polls","Archive poll"))+" ")]),e("NcActionButton",{staticClass:"danger",attrs:{"close-after-click":""},on:{click:function(e){return t.confirmDelete(l.id,l.owner)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Delete poll"))+" ")])],1)]},proxy:!0}],null,!0)})}))],2)],1),t.isLoading?e("LoadingOverlay"):t._e(),t.takeOverModal?e("NcModal",{attrs:{size:"small"},on:{close:function(e){t.takeOverModal=!1}}},[e("div",{staticClass:"modal__content"},[e("h2",[t._v(t._s(t.t("polls","Do you want to take over this poll?")))]),e("div",[t._v(t._s(t.t("polls","{username} will get notified.",{username:t.currentPoll.owner.displayName})))]),e("div",{staticClass:"modal__buttons"},[e("NcButton",{on:{click:function(e){t.takeOverModal=!1}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","No"))+" ")]},proxy:!0}],null,!1,333354415)}),e("NcButton",{attrs:{type:"primary"},on:{click:function(e){return t.takeOverPoll()}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Yes"))+" ")]},proxy:!0}],null,!1,1094677729)})],1)])]):t._e(),t.deleteModal?e("NcModal",{attrs:{size:"small"},on:{close:function(e){t.deleteModal=!1}}},[e("div",{staticClass:"modal__content"},[e("h2",[t._v(t._s(t.t("polls","Do you want to delete this poll?")))]),e("div",[t._v(" "+t._s(t.t("polls","This action cannot be reverted."))+" "+t._s(t.t("polls","{username} will get notified.",{username:t.currentPoll.owner.displayName}))+" ")]),e("div",{staticClass:"modal__buttons"},[e("NcButton",{on:{click:function(e){t.deleteModal=!1}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","No"))+" ")]},proxy:!0}],null,!1,333354415)}),e("NcButton",{attrs:{type:"primary"},on:{click:function(e){return t.deletePoll()}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Yes"))+" ")]},proxy:!0}],null,!1,1094677729)})],1)])]):t._e()],1)};s._withStripped=!0;var n=o(20629),i=o(64024),r=o(15961),a=o(96486),c=o(1410),d=o(73108),p=o(50171),u=o(63651),A=o(93317),_=o(99270);const h={name:"Administration",components:{ArchivePollIcon:u.Z,RestorePollIcon:A.Z,PlusIcon:_.Z,DeleteIcon:p.Z,PollsAppIcon:d.Z,NcAppContent:r.Mb,NcActions:r.O3,NcActionButton:r.Js,NcEmptyContent:r.SL,HeaderBar:c.Z,NcModal:r.Jc,NcButton:r.P2,LoadingOverlay:()=>o.e("src_js_components_Base_LoadingOverlay_vue").then(o.bind(o,95117)),PollItem:()=>o.e("src_js_components_PollList_PollItem_vue").then(o.bind(o,19174))},data:()=>({isLoading:!1,sort:"created",reverse:!0,takeOverModal:!1,currentPoll:{owner:"",pollId:0},deleteModal:!1}),computed:{...(0,n.Se)({filteredPolls:"pollsAdmin/filtered"}),title:()=>t("polls","Administration"),windowTitle(){return"".concat(t("polls","Polls")," - ").concat(this.title)},sortedList(){return this.reverse?(0,a.sortBy)(this.filteredPolls(this.$route.params.type),this.sort).reverse():(0,a.sortBy)(this.filteredPolls(this.$route.params.type),this.sort)},noPolls(){return this.sortedList.length<1}},watch:{$route(){this.refreshView()}},mounted(){this.refreshView()},methods:{confirmTakeOver(t,e){this.currentPoll.pollId=t,this.currentPoll.owner=e,this.takeOverModal=!0},confirmDelete(t,e){this.currentPoll.pollId=t,this.currentPoll.owner=e,this.deleteModal=!0},async toggleArchive(e){try{await this.$store.dispatch("poll/toggleArchive",{pollId:e})}catch{(0,i.x2)(t("polls","Error archiving/restoring poll."))}},async deletePoll(){try{await this.$store.dispatch("poll/delete",{pollId:this.currentPoll.pollId}),this.deleteModal=!1}catch{(0,i.x2)(t("polls","Error deleting poll.")),this.deleteModal=!1}},async takeOverPoll(){try{await this.$store.dispatch("pollsAdmin/takeOver",{pollId:this.currentPoll.pollId}),this.takeOverModal=!1}catch{(0,i.x2)(t("polls","Error overtaking poll.")),this.takeOverModal=!1}},refreshView(){window.document.title="".concat(t("polls","Polls")," - ").concat(this.title)},setSort(t){this.sort===t.sort?this.reverse=!this.reverse:(this.sort=t.sort,this.reverse=!0)}}};var f=o(93379),m=o.n(f),C=o(7795),v=o.n(C),g=o(90569),y=o.n(g),b=o(3565),x=o.n(b),w=o(19216),k=o.n(w),Z=o(44589),P=o.n(Z),B=o(94808),L={};L.styleTagTransform=P(),L.setAttributes=x(),L.insert=y().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=k();m()(B.Z,L);B.Z&&B.Z.locals&&B.Z.locals;const S=(0,o(51900).Z)(h,s,[],!1,null,null,null).exports},77745:(t,e,l)=>{l.d(e,{Z:()=>o});const o=l(82869).Z},53729:(t,e,l)=>{l.d(e,{s:()=>o.s,x:()=>o.x});var o=l(24274)},88041:(t,e,l)=>{l.d(e,{Z:()=>o});const o=l(26959).Z},65120:(t,e,l)=>{l.d(e,{s:()=>o.s,x:()=>o.x});var o=l(25195)},25195:(t,e,l)=>{l.d(e,{s:()=>o,x:()=>s});var o=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},s=[];o._withStripped=!0}}]);
//# sourceMappingURL=polls-src_js_views_Administration_vue.js.map?v=aa416fb9bbf7e6dffcd1