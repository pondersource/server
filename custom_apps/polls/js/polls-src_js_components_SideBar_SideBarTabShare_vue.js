/*! For license information please see polls-src_js_components_SideBar_SideBarTabShare_vue.js.LICENSE.txt */
"use strict";(self.webpackChunkpolls=self.webpackChunkpolls||[]).push([["src_js_components_SideBar_SideBarTabShare_vue"],{36066:(e,n,o)=>{o.d(n,{b:()=>l});var s=o(96486),i=o(64024);const l={computed:{...(0,o(20629).rn)({pollTitle:t=>t.poll.title})},methods:{successDebounced:(0,s.debounce)((function(){(0,i.s$)(t("polls",'"{pollTitle}" successfully saved',{pollTitle:this.pollTitle}),{timeout:1e3})}),1500),async writePoll(){if(""===this.pollTitle)(0,i.x2)(t("polls","Title must not be empty!"));else try{await this.$store.dispatch("poll/update"),this.successDebounced()}catch{(0,i.x2)(t("polls","Error writing poll"))}}}}},13772:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".material-design-icon.delete-icon,.material-design-icon.undo-icon{cursor:pointer}.material-design-icon.delete-icon:hover{color:var(--color-error-hover)}.material-design-icon.arrow-u-left-top-icon{visibility:visible !important}","",{version:3,sources:["webpack://./src/js/components/Actions/ActionDelete.vue"],names:[],mappings:"AAGC,kEAEC,cAAA,CAGD,wCACC,8BAAA,CAED,4CAEC,6BAAA",sourcesContent:["\n.material-design-icon {\n\n\t&.delete-icon,\n\t&.undo-icon {\n\t\tcursor: pointer;\n\t}\n\n\t&.delete-icon:hover {\n\t\tcolor: var(--color-error-hover);\n\t}\n\t&.arrow-u-left-top-icon {\n\t\t/* force the undo icon always to be visible */\n\t\tvisibility: visible !important;\n\t}\n}\n"],sourceRoot:""}]);const a=l},84303:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".config-box__header{display:flex;align-content:center;align-items:center;gap:5px;margin:8px 0 8px 0}.config-box{display:flex;flex-direction:column;padding:8px 0}.config-box .icon-container{width:20px}.config-box .config-box__title{display:flex;flex:1;opacity:.7;font-weight:bold;margin:0}.config-box .config-box__title[class*=icon-]{padding-left:24px}.config-box .config-box__title .icon-info{opacity:.7;width:32px}.config-box .config-box__container{display:flex;flex-direction:column;padding-left:24px}.config-box .config-box__container label{margin:4px 0}.indented{margin-left:24px !important}","",{version:3,sources:["webpack://./src/js/components/Base/ConfigBox.vue"],names:[],mappings:"AACA,oBACC,YAAA,CACA,oBAAA,CACA,kBAAA,CACA,OAAA,CACA,kBAAA,CAGD,YACC,YAAA,CACA,qBAAA,CACA,aAAA,CACA,4BACC,UAAA,CAGD,+BACC,YAAA,CACA,MAAA,CACA,UAAA,CACA,gBAAA,CACA,QAAA,CAEA,6CACC,iBAAA,CAGD,0CACC,UAAA,CACA,UAAA,CAIF,mCACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,yCACC,YAAA,CAKH,UACC,2BAAA",sourcesContent:["\n.config-box__header {\n\tdisplay: flex;\n\talign-content: center;\n\talign-items: center;\n\tgap: 5px;\n\tmargin: 8px 0 8px 0;\n}\n\n.config-box {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 8px 0;\n\t.icon-container {\n\t\twidth: 20px;\n\t}\n\n\t.config-box__title {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\topacity: 0.7;\n\t\tfont-weight: bold;\n\t\tmargin: 0;\n\n\t\t&[class*='icon-'] {\n\t\t\tpadding-left: 24px;\n\t\t}\n\n\t\t.icon-info {\n\t\t\topacity: 0.7;\n\t\t\twidth: 32px;\n\t\t}\n\t}\n\n\t.config-box__container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-left: 24px;\n\n\t\tlabel {\n\t\t\tmargin: 4px 0;\n\t\t}\n\t}\n}\n\n.indented {\n\tmargin-left: 24px !important;\n}\n"],sourceRoot:""}]);const a=l},34510:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".canvas{margin:auto;padding:32px}.qr-url{font-size:.6em;margin-top:16px}@media print{.noprint{display:none}}","",{version:3,sources:["webpack://./src/js/components/Base/QrModal.vue"],names:[],mappings:"AACA,QACC,WAAA,CACA,YAAA,CAGD,QACE,cAAA,CACA,eAAA,CAGF,aACC,SACC,YAAA,CAAA",sourcesContent:["\n.canvas {\n\tmargin: auto;\n\tpadding: 32px;\n}\n\n.qr-url {\n  font-size: 0.6em;\n  margin-top: 16px;\n}\n\n@media print {\n\t.noprint {\n\t\tdisplay: none;\n\t}\n}\n"],sourceRoot:""}]);const a=l},18255:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".markup-description *{margin:revert;padding:revert;font-size:revert;text-decoration:revert;list-style:revert;opacity:revert;min-height:revert}.markup-description table{border-spacing:2px}.markup-description thead{background-color:var(--color-background-darker);color:var(--color-main-text)}.markup-description td,.markup-description th{padding:1px 4px}","",{version:3,sources:["webpack://./src/js/components/Poll/MarkUpDescription.vue"],names:[],mappings:"AAEA,sBACC,aAAA,CACA,cAAA,CACA,gBAAA,CACA,sBAAA,CACA,iBAAA,CACA,cAAA,CACA,iBAAA,CAIA,0BACC,kBAAA,CAGD,0BACC,+CAAA,CACA,4BAAA,CAGD,8CACC,eAAA",sourcesContent:["\n\n.markup-description * {\n\tmargin: revert;\n\tpadding: revert;\n\tfont-size: revert;\n\ttext-decoration: revert;\n\tlist-style: revert;\n\topacity: revert;\n\tmin-height: revert;\n}\n\n.markup-description {\n\ttable {\n\t\tborder-spacing: 2px;\n\t}\n\n\tthead {\n\t\tbackground-color: var(--color-background-darker);\n\t\tcolor: var(--color-main-text);\n\t}\n\n\ttd, th {\n\t\tpadding: 1px 4px;\n\t}\n}\n"],sourceRoot:""}]);const a=l},62112:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".shares-list.shared{border-top:1px solid var(--color-border);padding-top:24px;margin-top:16px}.vote-status{margin-left:8px;width:32px}.vote-status.voted{color:var(--color-polls-foreground-yes)}.vote-status.unvoted{color:var(--color-polls-foreground-no)}","",{version:3,sources:["webpack://./src/js/components/Shares/SharesList.vue"],names:[],mappings:"AACA,oBACC,wCAAA,CACA,gBAAA,CACA,eAAA,CAGD,aACC,eAAA,CACA,UAAA,CAEA,mBACC,uCAAA,CAGD,qBACC,sCAAA",sourcesContent:["\n.shares-list.shared {\n\tborder-top: 1px solid var(--color-border);\n\tpadding-top: 24px;\n\tmargin-top: 16px;\n}\n\n.vote-status {\n\tmargin-left: 8px;\n\twidth: 32px;\n\n\t&.voted {\n\t\tcolor: var(--color-polls-foreground-yes)\n\t}\n\n\t&.unvoted {\n\t\tcolor: var(--color-polls-foreground-no)\n\t}\n}\n\n"],sourceRoot:""}]);const a=l},94133:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".sidebar-share{display:flex;flex-direction:column}.shares-list{display:flex;flex-flow:column;justify-content:flex-start;padding-top:8px}.shares-list>li{display:flex;align-items:stretch;margin:4px 0}.share-item{display:flex;flex:1;align-items:center;max-width:100%}.share-item__description{flex:1;min-width:50px;color:var(--color-text-maxcontrast);padding-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}","",{version:3,sources:["webpack://./src/js/components/SideBar/SideBarTabShare.vue"],names:[],mappings:"AACA,eACC,YAAA,CACA,qBAAA,CAGD,aACC,YAAA,CACA,gBAAA,CACA,0BAAA,CACA,eAAA,CAEA,gBACC,YAAA,CACA,mBAAA,CACA,YAAA,CAIF,YACC,YAAA,CACA,MAAA,CACA,kBAAA,CACA,cAAA,CAGD,yBACC,MAAA,CACA,cAAA,CACA,mCAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA",sourcesContent:["\n.sidebar-share {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.shares-list {\n\tdisplay: flex;\n\tflex-flow: column;\n\tjustify-content: flex-start;\n\tpadding-top: 8px;\n\n\t> li {\n\t\tdisplay: flex;\n\t\talign-items: stretch;\n\t\tmargin: 4px 0;\n\t}\n}\n\n.share-item {\n\tdisplay: flex;\n\tflex: 1;\n\talign-items: center;\n\tmax-width: 100%;\n}\n\n.share-item__description {\n\tflex: 1;\n\tmin-width: 50px;\n\tcolor: var(--color-text-maxcontrast);\n\tpadding-left: 8px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n"],sourceRoot:""}]);const a=l},45298:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),s=n.n(o),i=n(23645),l=n.n(i)()(s());l.push([t.id,".multiselect{width:100% !important;max-width:100% !important;margin-top:4px !important;margin-bottom:4px !important}","",{version:3,sources:["webpack://./src/js/components/User/UserSearch.vue"],names:[],mappings:"AACA,aACC,qBAAA,CACA,yBAAA,CACA,yBAAA,CACA,4BAAA",sourcesContent:["\n.multiselect {\n\twidth: 100% !important;\n\tmax-width: 100% !important;\n\tmargin-top: 4px !important;\n\tmargin-bottom: 4px !important;\n}\n"],sourceRoot:""}]);const a=l},25919:(e,o,s)=>{s.d(o,{Z:()=>S});var i=function(){var t=this,e=t._self._c;return e("div",{},[e("NcButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.computedTitle,expression:"computedTitle"}],attrs:{type:"tertiary","aria-label":t.computedTitle},scopedSlots:t._u([{key:"icon",fn:function(){return[t.deleteTimeout?e("UndoIcon",{attrs:{size:t.iconSize},on:{click:function(e){return t.cancelDelete()}}}):e("DeleteIcon",{attrs:{size:t.iconSize},on:{click:function(e){return t.deleteItem()}}})]},proxy:!0}])})],1)};i._withStripped=!0;var l=s(15961),a=s(50171),r=s(4984);const c={name:"ActionDelete",components:{DeleteIcon:a.Z,UndoIcon:r.Z,NcButton:l.P2},props:{timeout:{type:Number,default:4},title:{type:String,default:t("polls","Delete")},iconSize:{type:Number,default:20}},data:()=>({deleteInterval:null,deleteTimeout:null,countdown:4}),computed:{countdownTitle(){return n("polls","Deleting in {countdown} second","Deleting in {countdown} seconds",this.countdown,{countdown:this.countdown})},computedTitle(){return this.deleteTimeout?this.countdownTitle:this.title}},methods:{deleteItem(){this.countDown=this.timeout,this.deleteInterval=setInterval((()=>{this.countdown-=1,this.countdown<0&&(this.countdown=0)}),1e3),this.deleteTimeout=setTimeout((()=>{this.$emit("delete"),this.deleteTimeout=null,this.deleteInterval=null,this.countdown=this.timeout}),1e3*this.timeout)},cancelDelete(){clearTimeout(this.deleteTimeout),clearInterval(this.deleteInterval),this.deleteTimeout=null,this.deleteInterval=null,this.countdown=this.timeout}}};var d=s(93379),p=s.n(d),A=s(7795),u=s.n(A),m=s(90569),h=s.n(m),v=s(3565),C=s.n(v),f=s(19216),x=s.n(f),y=s(44589),g=s.n(y),b=s(13772),_={};_.styleTagTransform=g(),_.setAttributes=C(),_.insert=h().bind(null,"head"),_.domAPI=u(),_.insertStyleElement=x();p()(b.Z,_);b.Z&&b.Z.locals&&b.Z.locals;const S=(0,s(51900).Z)(c,i,[],!1,null,null,null).exports},74712:(t,e,n)=>{n.d(e,{Z:()=>x});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"config-box"},[e("div",{staticClass:"config-box__header"},[t._t("icon"),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:t.info,expression:"info",modifiers:{auto:!0}}],class:["config-box__title",t.iconClassComputed,{indented:t.indented}]},[t._v(" "+t._s(t.title)+" "),t.info?e("div",{staticClass:"icon-info"}):t._e()]),t._t("actions")],2),e("div",{staticClass:"config-box__container"},[t._t("default")],2)])};o._withStripped=!0;const s={name:"ConfigBox",props:{title:{type:String,default:""},iconClass:{type:String,default:null},info:{type:String,default:""},indented:{type:Boolean,default:!1}},computed:{hasIconSlot(){return!!this.$slots.icon},iconClassComputed(){return this.hasIconSlot?null:this.iconClass}}};var i=n(93379),l=n.n(i),a=n(7795),r=n.n(a),c=n(90569),d=n.n(c),p=n(3565),A=n.n(p),u=n(19216),m=n.n(u),h=n(44589),v=n.n(h),C=n(84303),f={};f.styleTagTransform=v(),f.setAttributes=A(),f.insert=d().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=m();l()(C.Z,f);C.Z&&C.Z.locals&&C.Z.locals;const x=(0,n(51900).Z)(s,o,[],!1,null,null,null).exports},86761:(t,e,n)=>{n.d(e,{Z:()=>k});var o=function(){var t=this;return(0,t._self._c)("div",{staticClass:"markup-description",domProps:{innerHTML:t._s(t.markedDescription)}})};o._withStripped=!0;var s=n(87441),i=n(83610),l=n(9309),a=n(27856),r=n.n(a),c=n(20629);const d={prefix:"desc-"},p={name:"MarkUpDescription",computed:{...(0,c.rn)({description:t=>t.poll.descriptionSafe}),markedDescription(){return s.TU.use((0,l.u)(d)),s.TU.use((0,i.d)()),r().sanitize(s.TU.parse(this.description))}}};var A=n(93379),u=n.n(A),m=n(7795),h=n.n(m),v=n(90569),C=n.n(v),f=n(3565),x=n.n(f),y=n(19216),g=n.n(y),b=n(44589),_=n.n(b),S=n(18255),w={};w.styleTagTransform=_(),w.setAttributes=x(),w.insert=C().bind(null,"head"),w.domAPI=h(),w.insertStyleElement=g();u()(S.Z,w);S.Z&&S.Z.locals&&S.Z.locals;const k=(0,n(51900).Z)(p,o,[],!1,null,null,null).exports},47537:(e,n,o)=>{o.r(n),o.d(n,{default:()=>pt});var s=function(){var t=this._self._c;return t("div",{staticClass:"sidebar-share"},[t("SharesListUnsent",{staticClass:"shares unsent"}),t("SharesList",{staticClass:"shares effective"})],1)};s._withStripped=!0;var i=o(20629),l=function(){var t=this,e=t._self._c;return e("ConfigBox",{attrs:{title:t.t("polls","Shares")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon")]},proxy:!0}])},[e("UserSearch",{staticClass:"add-share"}),t.allowAllAccess?e("ShareItemAllUsers"):t._e(),t.allowPublicShares?e("SharePublicAdd"):t._e(),t.invitationShares.length?e("div",{staticClass:"shares-list shared"},[e("TransitionGroup",{attrs:{css:!1,tag:"div"}},t._l(t.invitationShares,(function(n){return e("UserItem",t._b({key:n.id,attrs:{"show-email":"",icon:!0},scopedSlots:t._u([{key:"status",fn:function(){return[t.hasVoted(n.userId)?e("div",[e("VotedIcon",{staticClass:"vote-status voted",attrs:{title:t.t("polls","Has voted")}})],1):["public","group"].includes(n.type)?e("div",[e("div",{staticClass:"vote-status empty"})]):e("div",[e("UnvotedIcon",{staticClass:"vote-status unvoted",attrs:{title:t.t("polls","Has not voted")}})],1)]},proxy:!0}],null,!0)},"UserItem",n,!1),[e("NcActions",[n.emailAddress||"group"===n.type?e("NcActionButton",{on:{click:function(e){return t.sendInvitation(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SendEmailIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(n.invitationSent?t.t("polls","Resend invitation mail"):t.t("polls","Send invitation mail"))+" ")]):t._e(),"user"===n.type||"admin"===n.type?e("NcActionButton",{on:{click:function(e){return t.switchAdmin({share:n})}},scopedSlots:t._u([{key:"icon",fn:function(){return["user"===n.type?e("GrantAdminIcon"):e("WithdrawAdminIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s("user"===n.type?t.t("polls","Grant poll admin access"):t.t("polls","Withdraw poll admin access"))+" ")]):t._e(),e("NcActionButton",{on:{click:function(e){return t.copyLink({url:n.URL})}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ClippyIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Copy link to clipboard"))+" ")]),n.URL?e("NcActionButton",{on:{click:function(e){return t.openQrModal({url:n.URL})}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("QrIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Show QR code"))+" ")]):t._e(),"public"===n.type?e("NcActionCaption",{attrs:{title:t.t("polls","Options for the registration dialog")}}):t._e(),"public"===n.type?e("NcActionRadio",{attrs:{name:"publicPollEmail",value:"optional",checked:"optional"===n.publicPollEmail},on:{change:function(e){return t.setPublicPollEmail({share:n,value:"optional"})}}},[t._v(" "+t._s(t.t("polls","Email address is optional"))+" ")]):t._e(),"public"===n.type?e("NcActionRadio",{attrs:{name:"publicPollEmail",value:"mandatory",checked:"mandatory"===n.publicPollEmail},on:{change:function(e){return t.setPublicPollEmail({share:n,value:"mandatory"})}}},[t._v(" "+t._s(t.t("polls","Email address is mandatory"))+" ")]):t._e(),"public"===n.type?e("NcActionRadio",{attrs:{name:"publicPollEmail",value:"disabled",checked:"disabled"===n.publicPollEmail},on:{change:function(e){return t.setPublicPollEmail({share:n,value:"disabled"})}}},[t._v(" "+t._s(t.t("polls","Do not ask for an email address"))+" ")]):t._e()],1),e("ActionDelete",{attrs:{title:t.t("polls","Remove share")},on:{delete:function(e){return t.removeShare({share:n})}}})],1)})),1)],1):t._e(),t.qrModal?e("NcModal",{attrs:{size:"small"},on:{close:function(e){t.qrModal=!1}}},[e("QrModal",{staticClass:"modal__content",attrs:{title:t.pollTitle,description:t.pollDescription,"encode-text":t.qrText},scopedSlots:t._u([{key:"description",fn:function(){return[e("MarkUpDescription")]},proxy:!0}],null,!1,1638408632)})],1):t._e()],1)};l._withStripped=!0;var a=o(64024),r=o(15961),c=o(25919),d=o(74712),p=o(72171),A=o(92332),u=function(){var t=this,e=t._self._c;return e("NcSelect",{attrs:{id:"ajax",options:t.users,multiple:!1,"user-select":!0,"tag-width":80,limit:30,loading:t.isLoading,searchable:!0,placeholder:t.placeholder,label:"displayName"},on:{"option:selected":t.addShare,search:t.loadUsersAsync},scopedSlots:t._u([{key:"selection",fn:function(n){let{values:o,isOpen:s}=n;return[o.length&&!s?e("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(o.length)+" users selected ")]):t._e()]}}])})};u._withStripped=!0;var m=o(96486),h=o(6042);const v={name:"UserSearch",components:{NcSelect:r.QG},data:()=>({users:[],isLoading:!1,placeholder:t("polls","Type to add an individual share")}),computed:{},methods:{loadUsersAsync:(0,m.debounce)((async function(t){if(t){this.isLoading=!0;try{const e=await h.g.getUsers(t);this.users=e.data.siteusers,this.isLoading=!1}catch(t){if("ERR_CANCELED"===(null==t?void 0:t.code))return;console.error(t.response),this.isLoading=!1}}else this.users=[]}),250),async addShare(e){try{await this.$store.dispatch("shares/add",{share:e,type:e.type,id:e.id,emailAddress:e.emailAddress,displayName:e.displayName})}catch{(0,a.x2)(t("polls","Error while adding share"))}}}};var C=o(93379),f=o.n(C),x=o(7795),y=o.n(x),g=o(90569),b=o.n(g),_=o(3565),S=o.n(_),w=o(19216),k=o.n(w),I=o(44589),B=o.n(I),Z=o(45298),T={};T.styleTagTransform=B(),T.setAttributes=S(),T.insert=b().bind(null,"head"),T.domAPI=y(),T.insertStyleElement=k();f()(Z.Z,T);Z.Z&&Z.Z.locals&&Z.Z.locals;var N=o(51900);const E=(0,N.Z)(v,u,[],!1,null,null,null).exports;var U=function(){var t=this,e=t._self._c;return e("UserItem",{staticClass:"add-public",attrs:{type:"public","user-id":"addPublic","display-name":t.t("polls","Add a new public link"),"is-no-user":""},scopedSlots:t._u([{key:"status",fn:function(){return[e("div",{staticClass:"vote-status"})]},proxy:!0}])},[e("NcActions",[e("NcActionButton",{on:{click:function(e){return t.addPublicShare()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon")]},proxy:!0}])},[t._v(" "+t._s(t.t("polls","Add a new public link"))+" ")])],1)],1)};U._withStripped=!0;var P=o(99270);const D={name:"SharePublicAdd",components:{NcActions:r.O3,NcActionButton:r.Js,PlusIcon:P.Z},methods:{async addPublicShare(){try{await this.$store.dispatch("shares/add",{share:{type:"public",userId:""}})}catch{(0,a.x2)(t("polls","Error adding public link"))}}}};const R=(0,N.Z)(D,U,[],!1,null,null,null).exports;var M=function(){var t=this,e=t._self._c;return e("UserItem",{attrs:{type:"internalAccess","user-id":t.t("polls","Openly accessible poll"),"display-name":t.t("polls","Openly accessible poll"),disabled:"private"===t.access,"show-email":"","is-no-user":""},scopedSlots:t._u([{key:"status",fn:function(){return[e("div",{staticClass:"vote-status"})]},proxy:!0}])},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.pollAccess,type:"switch"},on:{"update:checked":function(e){t.pollAccess=e}}})],1)};M._withStripped=!0;var G=o(36066);const L={name:"ShareItemAllUsers",components:{NcCheckboxRadioSwitch:r.rw},mixins:[G.b],computed:{...(0,i.rn)({access:t=>t.poll.access}),pollAccess:{get(){return"open"===this.access},set(t){this.$store.commit("poll/setProperty",{important:+t}),this.$store.commit("poll/setProperty",{access:t?"open":"private"}),this.writePoll()}}}};const q=(0,N.Z)(L,M,[],!1,null,null,null).exports;var Q=o(83669),Y=o(23650),$=o(89484),z=o(41955),j=o(15101),O=o(72852),V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qr-code"},[e("h2",[t._v(t._s(t.title))]),t._t("description",(function(){return[t._v(" "+t._s(t.description)+" ")]})),e("div",{staticClass:"canvas"},[e("img",{attrs:{src:t.qrUri,alt:t.encodeText}})]),e("h3",[t._v(t._s(t.subTitle))]),e("p"),e("p",{staticClass:"qr-url"},[t._v(" "+t._s(t.encodeText)+" ")])],2)};V._withStripped=!0;var H=o(92592);const J={name:"QrModal",props:{title:{type:String,default:""},subTitle:{type:String,default:""},description:{type:String,default:""},encodeText:{type:String,default:""}},data:()=>({qrUri:{type:String,default:""}}),created(){this.generateQr()},methods:{async generateQr(){try{this.qrUri=await H.toDataURL(this.encodeText)}catch(t){console.error(t)}}}};var W=o(34510),F={};F.styleTagTransform=B(),F.setAttributes=S(),F.insert=b().bind(null,"head"),F.domAPI=y(),F.insertStyleElement=k();f()(W.Z,F);W.Z&&W.Z.locals&&W.Z.locals;const K=(0,N.Z)(J,V,[],!1,null,null,null).exports;var X=o(86761);const tt={name:"SharesList",components:{WithdrawAdminIcon:z.Z,GrantAdminIcon:$.default,ClippyIcon:j.Z,QrIcon:O.Z,ShareIcon:Q.default,SendEmailIcon:Y.Z,UnvotedIcon:A.default,UserSearch:E,VotedIcon:p.default,NcActions:r.O3,NcActionButton:r.Js,NcActionCaption:r.uy,NcActionRadio:r.Iz,ActionDelete:c.Z,ConfigBox:d.Z,SharePublicAdd:R,ShareItemAllUsers:q,QrModal:K,NcModal:r.Jc,MarkUpDescription:X.Z},data:()=>({qrModal:!1,qrText:""}),computed:{...(0,i.rn)({allowAllAccess:t=>t.poll.acl.allowAllAccess,allowPublicShares:t=>t.poll.acl.allowPublicShares,pollAccess:t=>t.poll.access,pollTitle:t=>t.poll.title,pollDescription:t=>t.poll.description}),...(0,i.Se)({invitationShares:"shares/invitation",hasVoted:"votes/hasVoted"})},methods:{...(0,i.nv)({removeShare:"shares/delete",switchAdmin:"shares/switchAdmin",setPublicPollEmail:"shares/setPublicPollEmail"}),async sendInvitation(e){var n,o,s,i;const l=await this.$store.dispatch("shares/sendInvitation",{share:e});null!==(n=l.data)&&void 0!==n&&null!==(o=n.sentResult)&&void 0!==o&&o.sentMails&&l.data.sentResult.sentMails.forEach((e=>{(0,a.s$)(t("polls","Invitation sent to {displayName} ({emailAddress})",{emailAddress:e.emailAddress,displayName:e.displayName}))})),null!==(s=l.data)&&void 0!==s&&null!==(i=s.sentResult)&&void 0!==i&&i.abortedMails&&l.data.sentResult.abortedMails.forEach((e=>{console.error("Mail could not be sent!",{recipient:e}),(0,a.x2)(t("polls","Error sending invitation to {displayName} ({emailAddress})",{emailAddress:e.emailAddress,displayName:e.displayName}))}))},copyLink(e){try{navigator.clipboard.writeText(e.url),(0,a.s$)(t("polls","Link copied to clipboard"))}catch{(0,a.x2)(t("polls","Error while copying link to clipboard"))}},openQrModal(t){this.qrText=t.url,this.qrModal=!0}}};var et=o(62112),nt={};nt.styleTagTransform=B(),nt.setAttributes=S(),nt.insert=b().bind(null,"head"),nt.domAPI=y(),nt.insertStyleElement=k();f()(et.Z,nt);et.Z&&et.Z.locals&&et.Z.locals;const ot=(0,N.Z)(tt,l,[],!1,null,null,null).exports;var st=function(){var t=this,e=t._self._c;return t.unsentInvitations.length?e("ConfigBox",{attrs:{title:t.t("polls","Unsent invitations")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EmailAlertIcon")]},proxy:!0}],null,!1,2672430058)},[e("TransitionGroup",{staticClass:"shares-list",attrs:{css:!1,tag:"div"}},t._l(t.unsentInvitations,(function(n){return e("UserItem",t._b({key:n.id,attrs:{"show-email":"","resolve-info":"",icon:!0}},"UserItem",n,!1),[e("NcActions",[n.emailAddress||"group"===n.type?e("NcActionButton",{on:{click:function(e){return t.sendInvitation(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SendEmailIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Send invitation mail"))+" ")]):t._e(),["contactGroup","circle"].includes(n.type)?e("NcActionButton",{on:{click:function(e){return t.resolveGroup(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ResolveGroupIcon")]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.t("polls","Resolve into individual invitations"))+" ")]):t._e()],1),e("ActionDelete",{attrs:{title:t.t("polls","Remove invitation")},on:{delete:function(e){return t.removeShare({share:n})}}})],1)})),1)],1):t._e()};st._withStripped=!0;var it=o(15818),lt=o(17872);const at={name:"SharesListUnsent",components:{EmailAlertIcon:it.Z,ResolveGroupIcon:lt.Z,SendEmailIcon:Y.Z,NcActions:r.O3,NcActionButton:r.Js,ActionDelete:c.Z,ConfigBox:d.Z},computed:{...(0,i.Se)({unsentInvitations:"shares/unsentInvitations"})},methods:{...(0,i.nv)({removeShare:"shares/delete"}),async resolveGroup(e){try{await this.$store.dispatch("shares/resolveGroup",{share:e})}catch(n){409===n.response.status&&"Circles is not enabled for this user"===n.response.data?(0,a.x2)(t("polls","Resolving of {name} is not possible. The circles app is not enabled.",{name:e.displayName})):409===n.response.status&&"Contacts is not enabled"===n.response.data?(0,a.x2)(t("polls","Resolving of {name} is not possible. The contacts app is not enabled.",{name:e.displayName})):(0,a.x2)(t("polls","Error resolving {name}.",{name:e.displayName}))}},async sendInvitation(e){var n,o,s,i;const l=await this.$store.dispatch("shares/sendInvitation",{share:e});null!==(n=l.data)&&void 0!==n&&null!==(o=n.sentResult)&&void 0!==o&&o.sentMails&&l.data.sentResult.sentMails.forEach((e=>{(0,a.s$)(t("polls","Invitation sent to {displayName} ({emailAddress})",{emailAddress:e.emailAddress,displayName:e.displayName}))})),null!==(s=l.data)&&void 0!==s&&null!==(i=s.sentResult)&&void 0!==i&&i.abortedMails&&l.data.sentResult.abortedMails.forEach((e=>{console.error("Mail could not be sent!",{recipient:e}),(0,a.x2)(t("polls","Error sending invitation to {displayName} ({emailAddress})",{emailAddress:e.emailAddress,displayName:e.displayName}))}))}}};const rt={name:"SideBarTabShare",components:{SharesList:ot,SharesListUnsent:(0,N.Z)(at,st,[],!1,null,null,null).exports},computed:{...(0,i.rn)({pollId:t=>t.poll.id,pollTitle:t=>t.poll.title})}};var ct=o(94133),dt={};dt.styleTagTransform=B(),dt.setAttributes=S(),dt.insert=b().bind(null,"head"),dt.domAPI=y(),dt.insertStyleElement=k();f()(ct.Z,dt);ct.Z&&ct.Z.locals&&ct.Z.locals;const pt=(0,N.Z)(rt,s,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=polls-src_js_components_SideBar_SideBarTabShare_vue.js.map?v=fc0dfd8bc55c96266883