"use strict";(self.webpackChunkpolls=self.webpackChunkpolls||[]).push([["src_js_components_Options_OptionsDateAdd_vue-_40461"],{65158:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(87537),s=n.n(i),a=n(23645),o=n.n(a)()(s());o.push([t.id,".spacer{flex:1}","",{version:3,sources:["webpack://./src/js/components/Base/FlexSpacer.vue"],names:[],mappings:"AACA,QACC,MAAA",sourcesContent:["\n.spacer {\n\tflex: 1;\n}\n"],sourceRoot:""}]);const l=o},34338:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(87537),s=n.n(i),a=n(23645),o=n.n(a)()(s());o.push([t.id,".mx-input-wrapper .material-design-icon__svg{width:initial;height:initial}.mx-input-wrapper .mx-icon-calendar{display:none}","",{version:3,sources:["webpack://./src/js/components/Options/OptionsDateAdd.vue"],names:[],mappings:"AAEA,6CACC,aAAA,CACA,cAAA,CAIA,oCACC,YAAA",sourcesContent:["\n\n.mx-input-wrapper .material-design-icon__svg {\n\twidth: initial;\n\theight: initial;\n}\n\n.mx-input-wrapper {\n\t.mx-icon-calendar {\n\t\tdisplay: none;\n\t}\n}\n"],sourceRoot:""}]);const l=o},43281:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(87537),s=n.n(i),a=n(23645),o=n.n(a)()(s());o.push([t.id,".picker-buttons{display:flex;justify-content:flex-end}.selection{display:flex;align-items:center}.selection .icon-polls-yes{padding:5px 1px 5px 1px;height:34px;margin:3px 0}.range{flex:1;justify-content:flex-end;margin:8px}","",{version:3,sources:["webpack://./src/js/components/Options/OptionsDateAdd.vue"],names:[],mappings:"AAEA,gBACC,YAAA,CACA,wBAAA,CAGD,WACC,YAAA,CACA,kBAAA,CAEA,2BACC,uBAAA,CACA,WAAA,CACA,YAAA,CAIF,OACC,MAAA,CACA,wBAAA,CACA,UAAA",sourcesContent:["\n\n.picker-buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n\n.selection {\n\tdisplay: flex;\n\talign-items: center;\n\n\t.icon-polls-yes {\n\t\tpadding: 5px 1px 5px 1px;\n\t\theight: 34px;\n\t\tmargin: 3px 0;\n\t}\n}\n\n.range {\n\tflex: 1;\n\tjustify-content: flex-end;\n\tmargin: 8px;\n}\n\n"],sourceRoot:""}]);const l=o},75078:(t,e,n)=>{n.d(e,{Z:()=>g});var i=function(){var t=this;return(0,t._self._c)(t.tag,{tag:"Component",staticClass:"spacer"},[t._t("default")],2)};i._withStripped=!0;const s={name:"FlexSpacer",props:{tag:{type:String,default:"div"}}};var a=n(93379),o=n.n(a),l=n(7795),r=n.n(l),c=n(90569),p=n.n(c),d=n(3565),u=n.n(d),h=n(19216),m=n.n(h),A=n(44589),f=n.n(A),k=n(65158),y={};y.styleTagTransform=f(),y.setAttributes=u(),y.insert=p().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=m();o()(k.Z,y);k.Z&&k.Z.locals&&k.Z.locals;const g=(0,n(51900).Z)(s,i,[],!1,null,null,null).exports},18755:(e,n,i)=>{i.r(n),i.d(n,{default:()=>w});var s=function(){var t=this,e=t._self._c;return e("NcDatetimePicker",t._b({staticStyle:{width:"inherit"},attrs:{open:t.pickerOpen},on:{"update:open":function(e){t.pickerOpen=e},change:t.changedDate,pick:t.pickedDate},scopedSlots:t._u([{key:"input",fn:function(){return[e("NcButton",{attrs:{type:"primary","aria-label":t.buttonAriaLabel},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AddDateIcon")]},proxy:!0}])},[t.caption?[t._v(" "+t._s(t.caption)+" ")]:t._e()],2)]},proxy:!0},{key:"header",fn:function(){return[e("NcCheckboxRadioSwitch",{staticClass:"range",attrs:{checked:t.useRange,type:"switch"},on:{"update:checked":function(e){t.useRange=e}}},[t._v(" "+t._s(t.t("polls","Select range"))+" ")]),e("div",{staticClass:"picker-buttons"},[t.useTime?e("NcButton",{on:{click:t.toggleTimePanel},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.showTimePanel?t.t("polls","Change date"):t.t("polls","Change time"))+" ")]},proxy:!0}],null,!1,10645599)}):t._e(),t.useTime?e("NcButton",{on:{click:t.removeTime},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Remove time"))+" ")]},proxy:!0}],null,!1,1106630493)}):e("NcButton",{attrs:{disabled:!t.dateOption.isValid},on:{click:t.addTime},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Add time"))+" ")]},proxy:!0}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t.dateOption.isValid?e("div",{staticClass:"selection"},[e("div",[t._v(" "+t._s(t.dateOption.text)+" ")]),e("FlexSpacer"),t.dateOption.option.duration>=0&&!t.added?e("NcButton",{attrs:{type:"primary"},on:{click:t.addOption}},[t._v(" "+t._s(t.t("polls","Add"))+" ")]):t._e(),t.added?e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:t.t("polls","Added"),expression:"t('polls', 'Added')",modifiers:{auto:!0}}],staticClass:"icon-polls-yes"}):t._e()],1):e("div",[t._v(" "+t._s(t.t("polls","Pick a day."))+" ")])]},proxy:!0}]),model:{value:t.pickerSelection,callback:function(e){t.pickerSelection=e},expression:"pickerSelection"}},"NcDatetimePicker",t.pickerOptions,!1))};s._withStripped=!0;var a=i(64024),o=i(80351),l=i.n(o),r=i(15961),c=i(75078);const p={name:"OptionsDateAdd",components:{AddDateIcon:i(13270).Z,NcButton:r.P2,NcCheckboxRadioSwitch:r.rw,NcDatetimePicker:r.P4,FlexSpacer:c.Z},props:{caption:{type:String,default:void 0}},data:()=>({pickerSelection:null,changed:!1,pickerOpen:!1,useRange:!1,useTime:!1,showTimePanel:!1,lastPickedDate:l()(null),added:!1}),computed:{buttonAriaLabel(){var e;return null!==(e=this.caption)&&void 0!==e?e:t("polls","Add date")},dateOption(){let t=l()(),e=l()(),n="";return Array.isArray(this.pickerSelection)?(t=l()(this.pickerSelection[0]),e=l()(this.pickerSelection[1]),this.useRange&&this.lastPickedDate&&(t=l()(this.lastPickedDate).hour(t.hour()).minute(t.minute()),e=l()(this.lastPickedDate).hour(e.hour()).minute(e.minute()))):(t=l()(this.pickerSelection).startOf(this.useTime?"minute":"day"),e=l()(this.pickerSelection).startOf(this.useTime?"minute":"day")),this.useRange?this.useTime?n=l()(t).startOf("day").valueOf()===l()(e).startOf("day").valueOf()?"".concat(t.format("ll LT")," - ").concat(e.format("LT")):"".concat(t.format("ll LT")," - ").concat(e.format("ll LT")):(t=t.startOf("day"),e=e.startOf("day"),n=l()(t).startOf("day").valueOf()===l()(e).startOf("day").valueOf()?t.format("ll"):"".concat(t.format("ll")," - ").concat(e.format("ll"))):n=this.useTime?t.format("ll LT"):t.startOf("day").format("ll"),{isValid:t._isValid&&e._isValid,from:t,to:e,text:n,option:{timestamp:t.unix(),duration:l()(e).add(this.useTime?0:1,"day").unix()-t.unix()}}},tempFormat(){return this.useTime?l().localeData().longDateFormat("L LT"):l().localeData().longDateFormat("L")},firstDOW:()=>0===l().localeData()._week.dow?7:l().localeData()._week.dow,pickerOptions(){return{appendToBody:!0,editable:!1,minuteStep:5,type:this.useTime?"datetime":"date",range:this.useRange,key:this.useRange?"range-on":"range-off",showSecond:!1,showTimePanel:this.showTimePanel,valueType:"timestamp",format:this.tempFormat,placeholder:t("polls","Click to add an option"),lang:{formatLocale:{firstDayOfWeek:this.firstDOW,months:l().months(),monthsShort:l().monthsShort(),weekdays:l().weekdays(),weekdaysMin:l().weekdaysMin()}}}}},watch:{useRange(){this.useRange&&!Array.isArray(this.pickerSelection)?this.pickerSelection=[this.pickerSelection,this.pickerSelection]:!this.useRange&&Array.isArray(this.pickerSelection)&&(this.pickerSelection=this.pickerSelection[0])}},methods:{changedDate(t,e){this.added=!1,this.changed=!0},pickedDate(t){this.added=!1,this.changed?(this.changed=!1,this.lastPickedDate=null):this.lastPickedDate=l()(t),this.pickerOpen=!0},addTime(){this.added=!1,this.useRange&&(this.pickerSelection=[this.dateOption.from.valueOf(),this.dateOption.to.valueOf()]),this.useTime=!0,this.showTimePanel=!0},removeTime(){this.added=!1,this.useRange&&(this.pickerSelection=[this.dateOption.from.valueOf(),this.dateOption.to.valueOf()]),this.useTime=!1,this.showTimePanel=!1},toggleTimePanel(){this.showTimePanel?this.changed=!1:this.useRange&&(this.pickerSelection=[this.dateOption.from.valueOf(),this.dateOption.to.valueOf()]),this.showTimePanel=!this.showTimePanel},async addOption(){this.useRange&&(this.pickerSelection=[this.dateOption.from.valueOf(),this.dateOption.to.valueOf()]);try{await this.$store.dispatch("options/add",this.dateOption.option),this.added=!0,(0,a.s$)(t("polls","{optionText} added",{optionText:this.dateOption.text}))}catch(e){409===e.response.status?(0,a.x2)(t("polls","{optionText} already exists",{optionText:this.dateOption.text})):(0,a.x2)(t("polls","Error adding {optionText}",{optionText:this.dateOption.text}))}}}};var d=i(93379),u=i.n(d),h=i(7795),m=i.n(h),A=i(90569),f=i.n(A),k=i(3565),y=i.n(k),g=i(19216),x=i.n(g),v=i(44589),O=i.n(v),C=i(34338),T={};T.styleTagTransform=O(),T.setAttributes=y(),T.insert=f().bind(null,"head"),T.domAPI=m(),T.insertStyleElement=x();u()(C.Z,T);C.Z&&C.Z.locals&&C.Z.locals;var _=i(43281),S={};S.styleTagTransform=O(),S.setAttributes=y(),S.insert=f().bind(null,"head"),S.domAPI=m(),S.insertStyleElement=x();u()(_.Z,S);_.Z&&_.Z.locals&&_.Z.locals;const w=(0,i(51900).Z)(p,s,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=polls-src_js_components_Options_OptionsDateAdd_vue-_40461.js.map?v=b6dfb8c6dd1d2302e796