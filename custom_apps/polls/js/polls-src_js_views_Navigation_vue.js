"use strict";(self.webpackChunkpolls=self.webpackChunkpolls||[]).push([["src_js_views_Navigation_vue"],{44257:(t,e,n)=>{n.d(e,{Z:()=>l});var o=n(15961);const l={name:"RadioGroupDiv",components:{NcCheckboxRadioSwitch:o.rw},props:{id:{type:String,default:()=>"rg-".concat(Math.random().toString(36).replace(/[^a-z]+/g,"").slice(2,12))},options:{type:Array,required:!0},value:{type:String,default:null}},computed:{selectedValue:{get(){return this.value},set(t){this.$emit("input",t)}}}}},43730:(t,e,n)=>{n.d(e,{s:()=>o,x:()=>l});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-group-div"},t._l(t.options,(function(n,o){return e("NcCheckboxRadioSwitch",{key:n.value,attrs:{checked:t.selectedValue,value:n.value,name:t.id+"_"+o,type:"radio"},on:{"update:checked":[function(e){t.selectedValue=e},function(e){return t.$emit("input",n.value)}]}},[t._v(" "+t._s(n.label)+" ")])})),1)},l=[];o._withStripped=!0},84303:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),l=n.n(o),i=n(23645),s=n.n(i)()(l());s.push([t.id,".config-box__header{display:flex;align-content:center;align-items:center;gap:5px;margin:8px 0 8px 0}.config-box{display:flex;flex-direction:column;padding:8px 0}.config-box .icon-container{width:20px}.config-box .config-box__title{display:flex;flex:1;opacity:.7;font-weight:bold;margin:0}.config-box .config-box__title[class*=icon-]{padding-left:24px}.config-box .config-box__title .icon-info{opacity:.7;width:32px}.config-box .config-box__container{display:flex;flex-direction:column;padding-left:24px}.config-box .config-box__container label{margin:4px 0}.indented{margin-left:24px !important}","",{version:3,sources:["webpack://./src/js/components/Base/ConfigBox.vue"],names:[],mappings:"AACA,oBACC,YAAA,CACA,oBAAA,CACA,kBAAA,CACA,OAAA,CACA,kBAAA,CAGD,YACC,YAAA,CACA,qBAAA,CACA,aAAA,CACA,4BACC,UAAA,CAGD,+BACC,YAAA,CACA,MAAA,CACA,UAAA,CACA,gBAAA,CACA,QAAA,CAEA,6CACC,iBAAA,CAGD,0CACC,UAAA,CACA,UAAA,CAIF,mCACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,yCACC,YAAA,CAKH,UACC,2BAAA",sourcesContent:["\n.config-box__header {\n\tdisplay: flex;\n\talign-content: center;\n\talign-items: center;\n\tgap: 5px;\n\tmargin: 8px 0 8px 0;\n}\n\n.config-box {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 8px 0;\n\t.icon-container {\n\t\twidth: 20px;\n\t}\n\n\t.config-box__title {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\topacity: 0.7;\n\t\tfont-weight: bold;\n\t\tmargin: 0;\n\n\t\t&[class*='icon-'] {\n\t\t\tpadding-left: 24px;\n\t\t}\n\n\t\t.icon-info {\n\t\t\topacity: 0.7;\n\t\t\twidth: 32px;\n\t\t}\n\t}\n\n\t.config-box__container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-left: 24px;\n\n\t\tlabel {\n\t\t\tmargin: 4px 0;\n\t\t}\n\t}\n}\n\n.indented {\n\tmargin-left: 24px !important;\n}\n"],sourceRoot:""}]);const a=s},81548:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),l=n.n(o),i=n(23645),s=n.n(i)()(l());s.push([t.id,".closed .app-navigation-entry-icon,.closed .app-navigation-entry__title{opacity:.6}","",{version:3,sources:["webpack://./src/js/views/Navigation.vue"],names:[],mappings:"AAEC,wEACC,UAAA",sourcesContent:["\n.closed {\n\t.app-navigation-entry-icon, .app-navigation-entry__title {\n\t\topacity: 0.6;\n\t}\n}\n\n"],sourceRoot:""}]);const a=s},95899:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(87537),l=n.n(o),i=n(23645),s=n.n(i)()(l());s.push([t.id,"\n.create-dialog {\n\tbackground-color: var(--color-main-background);\n\tpadding: 8px 20px;\n}\n.create-buttons {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n","",{version:3,sources:["webpack://./src/js/components/Create/CreateDlg.vue"],names:[],mappings:";AAiIA;CACA,8CAAA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;CACA,8BAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright Copyright (c) 2018 René Gieling <github@dartcafe.de>\n  -\n  - @author René Gieling <github@dartcafe.de>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n\n<template lang=\"html\">\n\t<div class=\"create-dialog\">\n\t\t<ConfigBox :title=\"t('polls', 'Title')\">\n\t\t\t<template #icon>\n\t\t\t\t<SpeakerIcon />\n\t\t\t</template>\n\t\t\t<InputDiv ref=\"pollTitle\"\n\t\t\t\tv-model=\"title\"\n\t\t\t\ttype=\"text\"\n\t\t\t\t:placeholder=\"t('polls', 'Enter Title')\"\n\t\t\t\t@submit=\"confirm\" />\n\t\t</ConfigBox>\n\n\t\t<ConfigBox :title=\"t('polls', 'Poll type')\">\n\t\t\t<template #icon>\n\t\t\t\t<CheckIcon />\n\t\t\t</template>\n\t\t\t<RadioGroupDiv v-model=\"pollType\" :options=\"pollTypeOptions\" />\n\t\t</ConfigBox>\n\n\t\t<div class=\"create-buttons\">\n\t\t\t<NcButton @click=\"cancel\">\n\t\t\t\t<template #default>\n\t\t\t\t\t{{ t('polls', 'Cancel') }}\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton :disabled=\"titleEmpty\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\t@click=\"confirm\">\n\t\t\t\t<template #default>\n\t\t\t\t\t{{ t('polls', 'Apply') }}\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { showSuccess, showError } from '@nextcloud/dialogs'\nimport { NcButton } from '@nextcloud/vue'\nimport ConfigBox from '../Base/ConfigBox.vue'\nimport RadioGroupDiv from '../Base/RadioGroupDiv.vue'\nimport SpeakerIcon from 'vue-material-design-icons/Bullhorn.vue'\nimport CheckIcon from 'vue-material-design-icons/Check.vue'\nimport InputDiv from '../Base/InputDiv.vue'\n\nexport default {\n\tname: 'CreateDlg',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tSpeakerIcon,\n\t\tCheckIcon,\n\t\tConfigBox,\n\t\tRadioGroupDiv,\n\t\tInputDiv,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tpollType: 'datePoll',\n\t\t\ttitle: '',\n\t\t\tpollTypeOptions: [\n\t\t\t\t{ value: 'datePoll', label: t('polls', 'Date poll') },\n\t\t\t\t{ value: 'textPoll', label: t('polls', 'Text poll') },\n\t\t\t],\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapState({\n\t\t\tpoll: (state) => state.poll,\n\t\t}),\n\n\t\ttitleEmpty() {\n\t\t\treturn this.title === ''\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/** @public */\n\t\tsetFocus() {\n\t\t\tthis.$refs.pollTitle.setFocus()\n\t\t},\n\n\t\tcancel() {\n\t\t\tthis.title = ''\n\t\t\tthis.pollType = 'datePoll'\n\t\t\tthis.$emit('close-create')\n\t\t},\n\n\t\tasync confirm() {\n\t\t\ttry {\n\t\t\t\tconst response = await this.$store.dispatch('poll/add', { title: this.title, type: this.pollType })\n\t\t\t\tthis.cancel()\n\t\t\t\tshowSuccess(t('polls', 'Poll \"{pollTitle}\" added', { pollTitle: response.data.title }))\n\t\t\t\tthis.$router.push({ name: 'vote', params: { id: response.data.id } })\n\t\t\t} catch {\n\t\t\t\tshowError(t('polls', 'Error while creating Poll \"{pollTitle}\"', { pollTitle: this.title }))\n\t\t\t}\n\t\t},\n\t},\n}\n<\/script>\n\n<style lang=\"css\">\n.create-dialog {\n\tbackground-color: var(--color-main-background);\n\tpadding: 8px 20px;\n}\n\n.create-buttons {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n</style>\n"],sourceRoot:""}]);const a=s},74712:(t,e,n)=>{n.d(e,{Z:()=>v});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"config-box"},[e("div",{staticClass:"config-box__header"},[t._t("icon"),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.auto",value:t.info,expression:"info",modifiers:{auto:!0}}],class:["config-box__title",t.iconClassComputed,{indented:t.indented}]},[t._v(" "+t._s(t.title)+" "),t.info?e("div",{staticClass:"icon-info"}):t._e()]),t._t("actions")],2),e("div",{staticClass:"config-box__container"},[t._t("default")],2)])};o._withStripped=!0;const l={name:"ConfigBox",props:{title:{type:String,default:""},iconClass:{type:String,default:null},info:{type:String,default:""},indented:{type:Boolean,default:!1}},computed:{hasIconSlot(){return!!this.$slots.icon},iconClassComputed(){return this.hasIconSlot?null:this.iconClass}}};var i=n(93379),s=n.n(i),a=n(7795),c=n.n(a),r=n(90569),p=n.n(r),d=n(3565),u=n.n(d),A=n(19216),f=n.n(A),m=n(44589),g=n.n(m),h=n(84303),C={};C.styleTagTransform=g(),C.setAttributes=u(),C.insert=p().bind(null,"head"),C.domAPI=c(),C.insertStyleElement=f();s()(h.Z,C);h.Z&&h.Z.locals&&h.Z.locals;const v=(0,n(51900).Z)(l,o,[],!1,null,null,null).exports},76994:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(18416),l=n(65512);const i=(0,n(51900).Z)(l.Z,o.s,o.x,!1,null,null,null).exports},37321:(e,n,o)=>{o.r(n),o.d(n,{default:()=>et});var l=function(){var t=this,e=t._self._c;return e("NcAppNavigation",{scopedSlots:t._u([{key:"list",fn:function(){return t._l(t.pollCategories,(function(n){return e("NcAppNavigationItem",{key:n.id,attrs:{name:n.title,"allow-collapse":!0,pinned:n.pinned,to:{name:"list",params:{type:n.id}},open:!1},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.getIconComponent(n.id),{tag:"Component",attrs:{size:t.iconSize}})]},proxy:!0}],null,!0)},[e("ul",t._l(t.filteredPolls(n.id),(function(n){return e("PollNavigationItems",{key:n.id,attrs:{poll:n},on:{"toggle-archive":function(e){return t.toggleArchive(n.id)},"clone-poll":function(e){return t.clonePoll(n.id)},"delete-poll":function(e){return t.deletePoll(n.id)}}})})),1)])}))},proxy:!0},{key:"footer",fn:function(){return[t.isComboActivated?e("NcAppNavigationItem",{attrs:{name:t.t("polls","Combine polls"),to:{name:"combo"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ComboIcon",{attrs:{size:t.iconSize}})]},proxy:!0}],null,!1,2222798499)}):t._e(),t.showAdminSection?e("NcAppNavigationItem",{attrs:{name:t.t("polls","Administration"),to:{name:"administration"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AdministrationIcon",{attrs:{size:t.iconSize}})]},proxy:!0}],null,!1,2053877857)}):t._e(),e("NcAppNavigationItem",{attrs:{name:t.t("polls","Polls settings")},on:{click:function(e){return t.showSettings()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SettingsIcon",{attrs:{size:t.iconSize}})]},proxy:!0}])})]},proxy:!0}])},[t.isPollCreationAllowed?e("NcAppNavigationNew",{attrs:{"button-class":"icon-add",text:t.t("polls","Add new Poll")},on:{click:t.toggleCreateDlg}}):t._e(),e("CreateDlg",{directives:[{name:"show",rawName:"v-show",value:t.createDlg,expression:"createDlg"}],ref:"createDlg",on:{"close-create":function(e){return t.closeCreate()}}})],1)};l._withStripped=!0;var i=o(15961),s=o(20629),a=o(77958),c=o(64024),r=o(69183),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-dialog"},[e("ConfigBox",{attrs:{title:t.t("polls","Title")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SpeakerIcon")]},proxy:!0}])},[e("InputDiv",{ref:"pollTitle",attrs:{type:"text",placeholder:t.t("polls","Enter Title")},on:{submit:t.confirm},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),e("ConfigBox",{attrs:{title:t.t("polls","Poll type")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon")]},proxy:!0}])},[e("RadioGroupDiv",{attrs:{options:t.pollTypeOptions},model:{value:t.pollType,callback:function(e){t.pollType=e},expression:"pollType"}})],1),e("div",{staticClass:"create-buttons"},[e("NcButton",{on:{click:t.cancel},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Cancel"))+" ")]},proxy:!0}])}),e("NcButton",{attrs:{disabled:t.titleEmpty,type:"primary"},on:{click:t.confirm},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.t("polls","Apply"))+" ")]},proxy:!0}])})],1)],1)};p._withStripped=!0;var d=o(74712),u=o(76994),A=o(74144),f=o(49793),m=o(34461);const g={name:"CreateDlg",components:{NcButton:i.P2,SpeakerIcon:A.Z,CheckIcon:f.default,ConfigBox:d.Z,RadioGroupDiv:u.Z,InputDiv:m.Z},data:()=>({pollType:"datePoll",title:"",pollTypeOptions:[{value:"datePoll",label:t("polls","Date poll")},{value:"textPoll",label:t("polls","Text poll")}]}),computed:{...(0,s.rn)({poll:t=>t.poll}),titleEmpty(){return""===this.title}},methods:{setFocus(){this.$refs.pollTitle.setFocus()},cancel(){this.title="",this.pollType="datePoll",this.$emit("close-create")},async confirm(){try{const e=await this.$store.dispatch("poll/add",{title:this.title,type:this.pollType});this.cancel(),(0,c.s$)(t("polls",'Poll "{pollTitle}" added',{pollTitle:e.data.title})),this.$router.push({name:"vote",params:{id:e.data.id}})}catch{(0,c.x2)(t("polls",'Error while creating Poll "{pollTitle}"',{pollTitle:this.title}))}}}};var h=o(93379),C=o.n(h),v=o(7795),y=o.n(v),x=o(90569),_=o.n(x),b=o(3565),w=o.n(b),I=o(19216),S=o.n(I),k=o(44589),P=o.n(k),N=o(95899),T={};T.styleTagTransform=P(),T.setAttributes=w(),T.insert=_().bind(null,"head"),T.domAPI=y(),T.insertStyleElement=S();C()(N.Z,T);N.Z&&N.Z.locals&&N.Z.locals;var B=o(51900);const Z=(0,B.Z)(g,p,[],!1,null,null,null).exports;var D=function(){var t=this,e=t._self._c;return e("NcAppNavigationItem",{class:{closed:t.closed},attrs:{name:t.poll.title,to:{name:"vote",params:{id:t.poll.id}}},scopedSlots:t._u([{key:"icon",fn:function(){return["textPoll"===t.poll.type?e("TextPollIcon"):e("DatePollIcon")]},proxy:!0},{key:"actions",fn:function(){return[t.isPollCreationAllowed?e("NcActionButton",{on:{click:function(e){return t.$emit("clone-poll")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ClonePollIcon")]},proxy:!0}],null,!1,2127697852)},[t._v(" "+t._s(t.t("polls","Clone poll"))+" ")]):t._e(),t.poll.allowEdit&&!t.poll.deleted?e("NcActionButton",{on:{click:function(e){return t.$emit("toggle-archive")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchivePollIcon")]},proxy:!0}],null,!1,3463713973)},[t._v(" "+t._s(t.t("polls","Archive poll"))+" ")]):t._e(),t.poll.allowEdit&&t.poll.deleted?e("NcActionButton",{on:{click:function(e){return t.$emit("toggle-archive")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("RestorePollIcon")]},proxy:!0}],null,!1,338267615)},[t._v(" "+t._s(t.t("polls","Restore poll"))+" ")]):t._e(),t.poll.allowEdit&&t.poll.deleted?e("NcActionButton",{staticClass:"danger",on:{click:function(e){return t.$emit("delete-poll")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeletePollIcon")]},proxy:!0}],null,!1,3337780846)},[t._v(" "+t._s(t.t("polls","Delete poll"))+" ")]):t._e()]},proxy:!0}])})};D._withStripped=!0;var E=o(50171),$=o(86433),R=o(63651),G=o(93317),U=o(88388),z=o(26426);const F={name:"PollNavigationItems",components:{NcActionButton:i.Js,NcAppNavigationItem:i.tn,DeletePollIcon:E.Z,ClonePollIcon:$.Z,ArchivePollIcon:R.Z,RestorePollIcon:G.Z,TextPollIcon:U.Z,DatePollIcon:z.default},props:{poll:{type:Object,default:void 0}},computed:{...(0,s.rn)({isPollCreationAllowed:t=>t.polls.isPollCreationAllowed}),...(0,s.Se)({closed:"poll/isClosed"})}};const Y=(0,B.Z)(F,D,[],!1,null,null,null).exports;var O=o(4668),j=o(40192),L=o(28694),q=o(78861),H=o(17802),M=o(19351),V=o(26105),W=o(31755),J=o(52769),K=o(94203);const Q={name:"Navigation",components:{NcAppNavigation:i.yS,NcAppNavigationNew:i.hX,NcAppNavigationItem:i.tn,CreateDlg:Z,PollNavigationItems:Y,ComboIcon:O.Z,SettingsIcon:L.Z,AdministrationIcon:j.default},data:()=>({iconSize:20,createDlg:!1,icons:[{id:"relevant",iconComponent:q.Z},{id:"my",iconComponent:H.Z},{id:"private",iconComponent:M.Z},{id:"participated",iconComponent:V.Z},{id:"open",iconComponent:W.Z},{id:"all",iconComponent:J.Z},{id:"closed",iconComponent:K.Z},{id:"archived",iconComponent:R.Z}]}),computed:{...(0,s.rn)({isPollCreationAllowed:t=>t.polls.isPollCreationAllowed,isComboActivated:t=>t.polls.isComboAllowed}),...(0,s.Se)({pollCategories:"polls/categories",filteredPolls:"polls/filtered"}),showAdminSection:()=>(0,a.ts)().isAdmin},created(){this.loadPolls()},beforeDestroy(){window.clearInterval(this.reloadTimer)},methods:{closeCreate(){this.createDlg=!1},getIconComponent(t){return this.icons.find((e=>e.id===t)).iconComponent},toggleCreateDlg(){this.createDlg=!this.createDlg,this.createDlg&&this.$refs.createDlg.setFocus()},showSettings(){(0,r.j8)("polls:settings:show")},async loadPolls(){try{this.$store.dispatch("polls/list"),(0,a.ts)().isAdmin&&this.$store.dispatch("pollsAdmin/list")}catch{(0,c.x2)(t("polls","Error loading poll list"))}},async clonePoll(e){try{const t=await this.$store.dispatch("poll/clone",{pollId:e});this.$router.push({name:"vote",params:{id:t.data.id}})}catch{(0,c.x2)(t("polls","Error cloning poll."))}},async toggleArchive(e){try{await this.$store.dispatch("poll/toggleArchive",{pollId:e})}catch{(0,c.x2)(t("polls","Error archiving/restoring poll."))}},async deletePoll(e){try{await this.$store.dispatch("poll/delete",{pollId:e}),this.$route.params.id&&this.$route.params.id===e&&this.$router.push({name:"list",params:{type:"deleted"}})}catch{(0,c.x2)(t("polls","Error deleting poll."))}}}};var X=o(81548),tt={};tt.styleTagTransform=P(),tt.setAttributes=w(),tt.insert=_().bind(null,"head"),tt.domAPI=y(),tt.insertStyleElement=S();C()(X.Z,tt);X.Z&&X.Z.locals&&X.Z.locals;const et=(0,B.Z)(Q,l,[],!1,null,null,null).exports},65512:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n(44257).Z},18416:(t,e,n)=>{n.d(e,{s:()=>o.s,x:()=>o.x});var o=n(43730)}}]);
//# sourceMappingURL=polls-src_js_views_Navigation_vue.js.map?v=0605a712dcdbbda7a0a5