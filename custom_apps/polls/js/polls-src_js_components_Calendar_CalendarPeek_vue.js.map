{"version":3,"file":"polls-src_js_components_Calendar_CalendarPeek_vue.js?v=d7c6e69801a174a22e4e","mappings":"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","sources":["webpack:///polls/src/js/components/Calendar/CalendarInfo.vue?vue&type=style&index=0&id=ce4507d8&prod&lang=scss&","webpack:///polls/src/js/components/Calendar/CalendarPeek.vue?vue&type=style&index=0&id=26631f52&prod&lang=scss&","webpack://polls/./src/js/components/Calendar/CalendarPeek.vue?82c1","webpack://polls/./src/js/components/Calendar/CalendarInfo.vue?b780","webpack:///polls/src/js/components/Calendar/CalendarInfo.vue","webpack:///polls/src/js/components/Calendar/CalendarInfo.vue?vue&type=script&lang=js&","webpack://polls/./src/js/components/Calendar/CalendarInfo.vue?9311","webpack://polls/./src/js/components/Calendar/CalendarInfo.vue?4dd6","webpack:///polls/src/js/components/Calendar/CalendarPeek.vue","webpack:///polls/src/js/components/Calendar/CalendarPeek.vue?vue&type=script&lang=js&","webpack://polls/./src/js/components/Calendar/CalendarPeek.vue?9bc9","webpack://polls/./src/js/components/Calendar/CalendarPeek.vue?1fd8"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.calendar-info{display:flex;align-items:center;border-radius:var(--border-radius);margin:4px 0;padding:0 4px}.calendar-info .summay{margin-left:4px}.calendar-info.conflict-ignore{border-left:4px solid rgba(0,0,0,0)}.calendar-info.conflict-ignore .summay{font-weight:bold}.calendar-info.conflict-no{border-left:4px solid var(--color-success)}.calendar-info.cancelled{text-decoration:line-through;opacity:.5}.calendar-info.tentative{opacity:.5}.calendar-info.conflict-yes{border-left:4px solid var(--color-error)}.calendar-info__time{width:65px;font-size:.8em;flex:0 auto}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/js/components/Calendar/CalendarInfo.vue\"],\"names\":[],\"mappings\":\"AAEA,eACC,YAAA,CACA,kBAAA,CACA,kCAAA,CACA,YAAA,CACA,aAAA,CAEA,uBACC,eAAA,CAGD,+BACC,mCAAA,CACA,uCACC,gBAAA,CAIF,2BACC,0CAAA,CAGD,yBACC,4BAAA,CACA,UAAA,CAGD,yBACC,UAAA,CAGD,4BACC,wCAAA,CAIF,qBACC,UAAA,CACA,cAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n\\n.calendar-info {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tborder-radius: var(--border-radius);\\n\\tmargin: 4px 0;\\n\\tpadding: 0 4px;\\n\\n\\t.summay {\\n\\t\\tmargin-left: 4px;\\n\\t}\\n\\n\\t&.conflict-ignore {\\n\\t\\tborder-left: 4px solid transparent;\\n\\t\\t.summay {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\t}\\n\\n\\t&.conflict-no {\\n\\t\\tborder-left: 4px solid var(--color-success);\\n\\t}\\n\\n\\t&.cancelled {\\n\\t\\ttext-decoration: line-through;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t&.tentative {\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t&.conflict-yes {\\n\\t\\tborder-left: 4px solid var(--color-error);\\n\\t}\\n}\\n\\n.calendar-info__time {\\n\\twidth: 65px;\\n\\tfont-size: 0.8em;\\n\\tflex: 0 auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.calendar-peek{flex-direction:column}.calendar-peek__conflict.icon{width:32px;height:32px;background-color:var(--color-warning);border-radius:50%;margin:4px auto}.calendar-peek__caption{font-size:.7em}.calendar-peek__grid{padding:8px;background-color:var(--color-main-background);border-radius:var(--border-radius)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/js/components/Calendar/CalendarPeek.vue\"],\"names\":[],\"mappings\":\"AAEA,eACC,qBAAA,CAGD,8BACC,UAAA,CACA,WAAA,CACA,qCAAA,CACA,iBAAA,CACA,eAAA,CAGD,wBACC,cAAA,CAGD,qBACC,WAAA,CACA,6CAAA,CACA,kCAAA\",\"sourcesContent\":[\"\\n\\n.calendar-peek {\\n\\tflex-direction: column;\\n}\\n\\n.calendar-peek__conflict.icon {\\n\\twidth: 32px;\\n\\theight: 32px;\\n\\tbackground-color: var(--color-warning);\\n\\tborder-radius: 50%;\\n\\tmargin: 4px auto;\\n}\\n\\n.calendar-peek__caption {\\n\\tfont-size: 0.7em;\\n}\\n\\n.calendar-peek__grid {\\n\\tpadding: 8px;\\n\\tbackground-color: var(--color-main-background);\\n\\tborder-radius: var(--border-radius);\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _vm.events.length\n    ? _c(\n        \"NcPopover\",\n        {\n          staticClass: \"calendar-peek\",\n          scopedSlots: _vm._u(\n            [\n              {\n                key: \"trigger\",\n                fn: function () {\n                  return [\n                    _c(\"div\", [\n                      _c(\"div\", {\n                        staticClass:\n                          \"calendar-peek__conflict icon icon-calendar\",\n                      }),\n                      _c(\"p\", { staticClass: \"calendar-peek__caption\" }, [\n                        _vm._v(\" \" + _vm._s(_vm.t(\"polls\", \"Conflict\")) + \" \"),\n                      ]),\n                    ]),\n                  ]\n                },\n                proxy: true,\n              },\n            ],\n            null,\n            false,\n            2438961837\n          ),\n        },\n        [\n          _c(\n            \"div\",\n            { staticClass: \"calendar-peek__grid\" },\n            _vm._l(_vm.sortedEvents, function (eventItem) {\n              return _c(\"CalendarInfo\", {\n                key: eventItem.UID,\n                attrs: { \"calendar-event\": eventItem, option: _vm.option },\n              })\n            }),\n            1\n          ),\n        ]\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    {\n      staticClass: \"calendar-info\",\n      class: [_vm.conflictLevel, _vm.statusClass],\n      style: _vm.calendarStyle,\n    },\n    [\n      _c(\"div\", { staticClass: \"calendar-info__time\" }, [\n        _vm._v(\n          \" \" +\n            _vm._s(_vm.showJustDays ? _vm.dayDisplay : _vm.timeDisplay) +\n            \" \"\n        ),\n      ]),\n      _c(\"div\", { staticClass: \"summay\", class: _vm.statusClass }, [\n        _vm._v(\" \" + _vm._s(_vm.calendarEvent.summary) + \" \"),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2018 René Gieling <github@dartcafe.de>\n  -\n  - @author René Gieling <github@dartcafe.de>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"calendar-info\"\n\t\t:class=\"[conflictLevel, statusClass]\"\n\t\t:style=\"calendarStyle\">\n\t\t<div class=\"calendar-info__time\">\n\t\t\t{{ showJustDays ? dayDisplay : timeDisplay }}\n\t\t</div>\n\t\t<div class=\"summay\" :class=\"statusClass\">\n\t\t\t{{ calendarEvent.summary }}\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\nimport moment from '@nextcloud/moment'\nexport default {\n\tname: 'CalendarInfo',\n\n\tprops: {\n\t\tcalendarEvent: {\n\t\t\ttype: Object,\n\t\t\tdefault: undefined,\n\t\t},\n\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\tdefault: undefined,\n\t\t},\n\n\t},\n\n\tcomputed: {\n\t\tcalendarStyle() {\n\t\t\treturn {\n\t\t\t\tbackgroundColor: this.calendarEvent.displayColor,\n\t\t\t\tcolor: this.fontColor,\n\t\t\t}\n\t\t},\n\n\t\tdayStart() {\n\t\t\treturn moment.unix(this.calendarEvent.start).format('ddd')\n\t\t},\n\n\t\tdayEnd() {\n\t\t\treturn moment.unix(this.calendarEvent.end - 1).format('ddd')\n\t\t},\n\n\t\tdayDisplay() {\n\t\t\tif (this.dayEnd === this.dayStart) {\n\t\t\t\treturn this.dayStart\n\t\t\t}\n\n\t\t\treturn `${this.dayStart} - ${this.dayEnd}`\n\t\t},\n\n\t\ttimeStart() {\n\t\t\treturn moment.unix(this.calendarEvent.start).format('LT')\n\t\t},\n\n\t\ttimeEnd() {\n\t\t\treturn moment.unix(this.calendarEvent.end).format('LT')\n\t\t},\n\n\t\ttimeDisplay() {\n\t\t\tif (this.timeEnd === this.timeStart) {\n\t\t\t\treturn this.timeStart\n\t\t\t}\n\t\t\treturn `${this.timeStart} - ${this.timeEnd}`\n\t\t},\n\n\t\tshowJustDays() {\n\t\t\treturn this.dayStart !== this.dayEnd || this.calendarEvent.allDay\n\t\t},\n\n\t\tstatusClass() {\n\t\t\treturn this.calendarEvent.status.toLowerCase()\n\t\t},\n\n\t\tfontColor() {\n\t\t\tif (this.calendarEvent.displayColor === 'transparent') {\n\t\t\t\treturn 'var(--color-main-text)'\n\t\t\t}\n\n\t\t\tconst hex = this.calendarEvent.displayColor.replace(/#/, '')\n\t\t\tconst r = parseInt(hex.slice(0, 2), 16)\n\t\t\tconst g = parseInt(hex.slice(2, 4), 16)\n\t\t\tconst b = parseInt(hex.slice(4, 6), 16)\n\n\t\t\tconst l = [\n\t\t\t\t0.299 * r,\n\t\t\t\t0.587 * g,\n\t\t\t\t0.114 * b,\n\t\t\t].reduce((a, b) => a + b) / 255\n\n\t\t\treturn l > 0.5 ? '#222' : '#ddd'\n\t\t},\n\n\t\tconflictLevel() {\n\t\t\tif (this.calendarEvent.calendarKey === 0) {\n\t\t\t\treturn 'conflict-ignore'\n\t\t\t}\n\n\t\t\t// No conflict, if calendarEvent starts after end of option\n\t\t\tif (this.calendarEvent.start >= this.option.timestamp + this.option.duration) {\n\t\t\t\treturn 'conflict-no'\n\t\t\t}\n\n\t\t\t// No conflict, if calendarEvent ends before option\n\t\t\tif (this.calendarEvent.end <= this.option.timestamp) {\n\t\t\t\treturn 'conflict-no'\n\t\t\t}\n\n\t\t\treturn 'conflict-yes'\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\">\n\n.calendar-info {\n\tdisplay: flex;\n\talign-items: center;\n\tborder-radius: var(--border-radius);\n\tmargin: 4px 0;\n\tpadding: 0 4px;\n\n\t.summay {\n\t\tmargin-left: 4px;\n\t}\n\n\t&.conflict-ignore {\n\t\tborder-left: 4px solid transparent;\n\t\t.summay {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n\n\t&.conflict-no {\n\t\tborder-left: 4px solid var(--color-success);\n\t}\n\n\t&.cancelled {\n\t\ttext-decoration: line-through;\n\t\topacity: 0.5;\n\t}\n\n\t&.tentative {\n\t\topacity: 0.5;\n\t}\n\n\t&.conflict-yes {\n\t\tborder-left: 4px solid var(--color-error);\n\t}\n}\n\n.calendar-info__time {\n\twidth: 65px;\n\tfont-size: 0.8em;\n\tflex: 0 auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarInfo.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarInfo.vue?vue&type=style&index=0&id=ce4507d8&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarInfo.vue?vue&type=style&index=0&id=ce4507d8&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./CalendarInfo.vue?vue&type=template&id=ce4507d8&\"\nimport script from \"./CalendarInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CalendarInfo.vue?vue&type=style&index=0&id=ce4507d8&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\n  - @copyright Copyright (c) 2018 René Gieling <github@dartcafe.de>\n  -\n  - @author René Gieling <github@dartcafe.de>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NcPopover v-if=\"events.length\" class=\"calendar-peek\">\n\t\t<template #trigger>\n\t\t\t<div>\n\t\t\t\t<div class=\"calendar-peek__conflict icon icon-calendar\" />\n\t\t\t\t<p class=\"calendar-peek__caption\">\n\t\t\t\t\t{{ t('polls', 'Conflict') }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</template>\n\t\t<div class=\"calendar-peek__grid\">\n\t\t\t<CalendarInfo v-for=\"eventItem in sortedEvents\"\n\t\t\t\t:key=\"eventItem.UID\"\n\t\t\t\t:calendar-event=\"eventItem\"\n\t\t\t\t:option=\"option\" />\n\t\t</div>\n\t</NcPopover>\n</template>\n\n<script>\n\nimport { mapState } from 'vuex'\nimport { orderBy } from 'lodash'\nimport { NcPopover } from '@nextcloud/vue'\nimport moment from '@nextcloud/moment'\nimport CalendarInfo from './CalendarInfo.vue'\nimport { CalendarAPI } from '../../Api/calendar.js'\n\nexport default {\n\tname: 'CalendarPeek',\n\n\tcomponents: {\n\t\tCalendarInfo,\n\t\tNcPopover,\n\t},\n\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\tdefault: undefined,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tevents: [],\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapState({\n\t\t\tpoll: (state) => state.poll,\n\t\t}),\n\n\t\tdetectAllDay() {\n\t\t\tconst from = moment.unix(this.option.timestamp)\n\t\t\tconst to = moment.unix(this.option.timestamp + Math.max(0, this.option.duration))\n\t\t\tconst dayLongEvent = from.unix() === moment(from).startOf('day').unix() && to.unix() === moment(to).startOf('day').unix() && from.unix() !== to.unix()\n\t\t\treturn {\n\t\t\t\tallDay: dayLongEvent,\n\t\t\t\ttype: dayLongEvent ? 'date' : 'dateTime',\n\t\t\t}\n\t\t},\n\n\t\tsortedEvents() {\n\t\t\tconst sortedEvents = [...this.events]\n\t\t\tsortedEvents.push(this.thisOption)\n\t\t\treturn orderBy(sortedEvents, ['start', 'end'], ['asc', 'asc'])\n\t\t},\n\n\t\tthisOption() {\n\t\t\treturn {\n\t\t\t\tid: this.option.id,\n\t\t\t\tUID: this.option.id,\n\t\t\t\tcalendarUri: this.poll.uri,\n\t\t\t\tcalendarKey: 0,\n\t\t\t\tcalendarName: 'Polls',\n\t\t\t\tdisplayColor: 'transparent',\n\t\t\t\tallDay: this.detectAllDay.allDay,\n\t\t\t\tdescription: this.poll.description,\n\t\t\t\tstart: this.option.timestamp,\n\t\t\t\tlocation: '',\n\t\t\t\tend: this.option.timestamp + this.option.duration,\n\t\t\t\tstatus: 'self',\n\t\t\t\tsummary: this.poll.title,\n\t\t\t\ttype: this.detectAllDay.type,\n\t\t\t}\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.getEvents()\n\t},\n\n\tmethods: {\n\t\tasync getEvents() {\n\t\t\ttry {\n\t\t\t\tconst response = await CalendarAPI.getEvents(this.option.id)\n\t\t\t\tthis.events = response.data.events\n\t\t\t} catch (e) {\n\t\t\t\tif (e?.code === 'ERR_CANCELED') return\n\t\t\t\tconsole.error('Error fetching events', { error: e.response })\n\t\t\t}\n\t\t},\n\n\t},\n}\n\n</script>\n\n<style lang=\"scss\">\n\n.calendar-peek {\n\tflex-direction: column;\n}\n\n.calendar-peek__conflict.icon {\n\twidth: 32px;\n\theight: 32px;\n\tbackground-color: var(--color-warning);\n\tborder-radius: 50%;\n\tmargin: 4px auto;\n}\n\n.calendar-peek__caption {\n\tfont-size: 0.7em;\n}\n\n.calendar-peek__grid {\n\tpadding: 8px;\n\tbackground-color: var(--color-main-background);\n\tborder-radius: var(--border-radius);\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPeek.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPeek.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPeek.vue?vue&type=style&index=0&id=26631f52&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPeek.vue?vue&type=style&index=0&id=26631f52&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./CalendarPeek.vue?vue&type=template&id=26631f52&\"\nimport script from \"./CalendarPeek.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarPeek.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CalendarPeek.vue?vue&type=style&index=0&id=26631f52&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","render","_vm","this","_c","_self","events","length","staticClass","scopedSlots","_u","key","fn","_v","_s","t","proxy","_l","sortedEvents","eventItem","UID","attrs","option","_e","_withStripped","class","conflictLevel","statusClass","style","calendarStyle","showJustDays","dayDisplay","timeDisplay","calendarEvent","summary","name","props","type","Object","default","undefined","computed","backgroundColor","displayColor","color","fontColor","dayStart","moment","start","format","dayEnd","end","concat","timeStart","timeEnd","allDay","status","toLowerCase","hex","replace","parseInt","slice","reduce","a","b","calendarKey","timestamp","duration","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","components","CalendarInfo","NcPopover","data","mapState","poll","state","detectAllDay","from","to","Math","max","dayLongEvent","unix","startOf","thisOption","orderBy","calendarUri","uri","calendarName","description","location","title","mounted","getEvents","methods","response","CalendarAPI","e","code","console","error"],"sourceRoot":""}